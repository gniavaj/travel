
/*! Generated by Clam: et 2014-07-11 11:06:15 */
YUI.namespace("Y.lowestFlight"),
    YUI.add("lowest-flight",
        function(a) {
            var b = '<div class="aside-box lowest-flight J_lowestFlight"><h5>\u6700\u4f4e\u4ef7\u5feb\u901f\u8d2d\u4e70</h5><dl><dt>$${placeInfo}</dt><dd><span class="lowest-flight-right10">${airLineName}</span><span class="lowest-flight-right10">${flightNo}</span><a href="javascript:void(0)" class="link J_PlaneType">${flightType}</a></dd><dd><b class="lowest-flight-right10">${depDate}</b><b>${depTime}</b> - ${arrTime}</dd><dd><span class="price"><em class="rmb">&yen;</em><em class="J_price">${cabin.allFinalPrice}</em></span>{@if cabin.insurePrice}<span class="insure" >+<span class="rmb">&yen;</span><span>${cabin.baseInsurePrice}</span>\u4fdd\u9669</span>{@/if}<span class="lowest-flight-discount">${cabin.allFinalDiscount}</span></dd><dd><a href="javascript:;" class="link reserve J_reserve J_lowestPrice" {@if cabin.insurePrice}data-insure="1"{@/if}>\u7acb\u5373{@if cabin.isApply}\u7533\u8bf7{@/if}{@if !cabin.isApply}\u9884\u8ba2{@/if}</a></dd></div>',
                c = "${depCityName}<em>\u2192</em>${arrCityName}",
                d = function() {
                    var b = this;
                    b.asideBox = a.one(".J_aside"),
                        b.listMain = a.one("#J_listMain"),
                        b.bindEvent()

                };
            d.prototype = {
                bindEvent: function() {
                    {
                        var b = this;
                        new a.HistoryHash

                    }
                    a.on("history:change", b.resetFlight, b),
                        a.Global.on("get-lowest-price", b.getLowestPrice, b),
                        a.delegate("click", b.reserve, ".J_aside", ".J_reserve", b)

                },
                getLowestPrice: function(d) {
                    var e = this;
                    if (d.tripObj != window) {
                        var f = a.all(".J_cPrice");
                        a.some(f,
                            function(a) {
                                return a.get("innerHTML") == d.lowestPrice ? (e.flightId = a.ancestor(".J_onePlane").getAttribute("data-id"), !0) : void 0

                            }),
                            e.oneFlight = a.mix({},
                                d.tripObj.flightList.flightList[e.flightId]);
                        var g = a.juicer(c, d.tripObj.searchInfo);
                        e.oneFlight.depDate = e.oneFlight.depDay.slice( - 5).replace("-", "/"),
                            e.oneFlight.placeInfo = g,
                            e.tripObj = d.tripObj,
                            e.getReserveUrl(),
                            e.resetFlight(),
                            e.asideBox.one(".cover").insert(a.juicer(b, e.oneFlight), "after")

                    }

                },
                getChangePrice: function(a) {
                    var b = this;
                    b.lowestFlightBox && b.lowestFlightBox.one(".J_price").set("innerHTMML", a)

                },
                getReserveUrl: function() {
                    var a = this;
                    a.tripObj.getReserveUrl(a.oneFlight, a.oneFlight.cabin, "1001")

                },
                reserve: function(a) {
                    a.halt();
                    var b = this;
                    b.tripObj.isLogin()

                },
                resetFlight: function() {
                    var b = a.one(".J_lowestFlight");
                    b && b.remove()

                }

            },
                new d

        },
        "", {
            requires: ["node", "juicer", "trip-history", "lowest-flight-css"]

        });
/*! Generated by Clam: et 2014-07-11 11:06:15 */
YUI.namespace("Y.flightFilter"),
    YUI.add("flight-filter",
        function(a) {
            a.flightFilter = function(b, c) {
                var d = this;
                d.data = a.clone(b, !0),
                    d.callback = c,
                    d.reset(),
                    d.clearSort(),
                    d.init.apply(this, arguments)

            },
                a.flightFilter.prototype = {
                    init: function() {
                        var a = this;
                        a.bindEvent()

                    },
                    reset: function() {
                        var b = this;
                        b.filterData = a.clone(b.data, !0)

                    },
                    clearSort: function() {
                        var a = this;
                        a.sortBy = "price::asc"

                    },
                    objectToArray: function(b) {
                        var c = [];
                        return a.each(b,
                            function(a) {
                                c.push(a)

                            }),
                            c

                    },
                    arrayToObject: function(b, c) {
                        var d = {};
                        return a.each(b,
                            function(a) {
                                d[a[c]] = a

                            }),
                            d

                    },
                    buildDate: function(a, b) {
                        var c = a.split(" ")[0].split("-"),
                            d = a.split(" ")[1].split(":");
                        return b && c[2]++,
                            new Date(c[0], c[1] - 1, c[2], d[0], d[1])

                    },
                    filterByAirLineCode: function(b) {
                        var c = this;
                        b && 0 != b.length && a.Object.each(c.filterData,
                            function(d, e) {
                                var f = d.airlineCode; - 1 == a.Array.indexOf(b, f) && delete c.filterData[e]

                            })

                    },
                    filterByTime: function(b) {
                        var c = this;
                        if (b && 0 != b.length) {
                            var d = [],
                                e = [];
                            a.Object.each(c.filterData,
                                function(f, g) {
                                    var h = f.depDay,
                                        i = h + " " + f.depTime;
                                    a.Array.each(b,
                                        function(a) {
                                            var b = c.buildDate(h + " " + a.split("-")[0]),
                                                f = c.buildDate(h + " " + a.split("-")[1]);
                                            b > f && (f = c.buildDate(h + " " + a.split("-")[1], !0));
                                            var j = c.buildDate(i);
                                            j >= b && f > j ? e.push(g) : d.push(g)

                                        })

                                });
                            for (var f = 0; f < d.length; f++) - 1 == a.Array.indexOf(e, d[f]) && delete c.filterData[d[f]]

                        }

                    },
                    filterByPort: function(b, c) {
                        var d = this;
                        b && 0 != b.length && a.Object.each(d.filterData,
                            function(e, f) {
                                var g = e[c + "Airport"]; - 1 == a.Array.indexOf(b, g) && delete d.filterData[f]

                            })

                    },
                    sortByTime: function(a) {
                        var b = this;
                        b.filterData.sort(a && "asc" == a ?
                            function(a, c) {
                                return b.buildDate(a.depDate) - b.buildDate(c.depDate)

                            }: function(a, c) {
                            return b.buildDate(c.depDate) - b.buildDate(a.depDate)

                        })

                    },
                    sortByPrice: function(a) {
                        var b = this;
                        b.filterData.sort(a && "asc" == a ?
                            function(a, b) {
                                return a.cabin.allFinalPrice - b.cabin.allFinalPrice

                            }: function(a, b) {
                            return b.cabin.allFinalPrice - a.cabin.allFinalPrice

                        })

                    },
                    sortFilterData: function() {
                        var a = this,
                            b = a.sortBy.split("::");
                        a.filterData = a.objectToArray(a.filterData),
                            "time" == b[0] && a.sortByTime(b[1]),
                            "price" == b[0] && a.sortByPrice(b[1])

                    },
                    nodeListToArray: function(b) {
                        var c = [];
                        return b._nodes ? (a.Array.each(b._nodes,
                            function(b) {
                                c.push(a.one(b))

                            }), c) : [b]

                    },
                    toggleTitle: function(b) {
                        var c = this;
                        b = c.nodeListToArray(b),
                            a.Array.each(b,
                                function(a) {
                                    var b = a.getAttribute("title");
                                    a.setAttribute("title", a.getAttribute("toggle-title")),
                                        a.setAttribute("toggle-title", b)

                                })

                    },
                    getChecked: function(b) {
                        var c = [],
                            d = a.all(b);
                        return a.Array.each(d._nodes,
                            function(a) {
                                a.checked && c.push(a)

                            }),
                            a.all(c)

                    },
                    changeNotify: function(a, b) {
                        var c = this;
                        c.data = a,
                            c.flushFilterData(),
                            b && c.buildOptionList(b)

                    },
                    flushFilterData: function() {
                        var a = this,
                            b = a.getChecked('input[name="airLineCode"]').get("value"),
                            c = a.getChecked('input[name="time"]').get("value"),
                            d = a.getChecked('input[name="depPortCode"]').get("value"),
                            e = a.getChecked('input[name="arrPortCode"]').get("value");
                        a.reset(),
                            b && a.filterByAirLineCode(b),
                            c && a.filterByTime(c),
                            d && a.filterByPort(d, "dep"),
                            e && a.filterByPort(e, "arr"),
                            a.sortFilterData(),
                            a.callback && a.callback(a.filterData)

                    },
                    buildOptionList: function(b) {
                        var c = this;
                        b && c.setLineList(b.airLine, a.one(".J_AirLineList"), a.one(".J_AirLine")),
                            b && c.setPortList(b, a.one(".J_AirportList"), a.one(".J_Airport")),
                            c.fixPosition(),
                            c.fixSize()

                    },
                    setLineList: function(b, c, d) {
                        var e = {
                                data: []

                            },
                            f = [],
                            g = 0;
                        a.each(b,
                            function(a, b) {
                                f.push({
                                    airLineCode: b,
                                    airLineName: a

                                }),
                                    g % 4 == 0 && 0 != g && (e.data.push({
                                        list: f

                                    }), f = []),
                                    g++

                            }),
                            f.length > 0 && e.data.push({
                                list: f

                            });
                        var h = '{@each data as item}<ul class="fl {@if item.onlyme}noborder{@/if}">{@each item.list as one}<li><input type="checkbox" name="airLineCode" value="${one.airLineCode}" id="filter_${one.airLineCode}" /><label for="filter_${one.airLineCode}">${one.airLineName}</label></li>{@/each}</ul>{@/each}';
                        1 == e.data.length && (e.data[0].onlyme = !0),
                            c && (c.setContent(a.juicer(h, e)), d.hasClass("l-current") && c.removeClass("hidden"))

                    },
                    setPortList: function(a, b, c) {
                        var d = this;
                        if (b) {
                            var e = Math.max(a.depAirport.length, a.arrAirport.length);
                            b.setContent(a.depAirport.length > 1 && a.arrAirport.length > 1 ? d.setTitleList(a.depAirport, "\u8d77\u98de", "dep", e) + d.setTitleList(a.arrAirport, "\u5230\u8fbe", "arr", e) : d.setTitleList(a.depAirport, "", "dep", e) + d.setTitleList(a.arrAirport, "", "arr", e)),
                                1 == b.all("ul").size() && b.one("ul").addClass("noborder"),
                                c.hasClass("l-current") && b.removeClass("hidden")

                        }

                    },
                    setTitleList: function(b, c, d, e) {
                        if (b && 1 == b.length) return "";
                        var f = [],
                            g = 0;
                        a.each(b,
                            function(a) {
                                a.keyName = d,
                                    f.push(a)

                            });
                        for (var g = 0, h = e - f.length; h > g; g++) f.push({
                            list: null

                        });
                        var i = '<ul class="fl">{@if title}<li>${title}</li>{@/if}{@each list as item}<li>{@if item.code}<input type="checkbox" name="${item.keyName}PortCode" value="${item.code}" id="filter_${item.code}"/><label for="filter_${item.code}">${item.name}</label>{@/if}</li>{@/if}</ul>';
                        return a.juicer(i, {
                            list: f,
                            title: c

                        })

                    },
                    unSelectAll: function() {
                        a.all('.l-tabox input[type="checkbox"]').set("checked", !1),
                            a.all(".l-selected .l-item").remove(),
                            a.one(".J_TagsBox").addClass("hidden")

                    },
                    getOneByAttribute: function(b, c, d) {
                        var e = this,
                            f = e.nodeListToArray(b),
                            g = null;
                        return a.Array.each(f,
                            function(a) {
                                a.getAttribute(c) == d && (g = a)

                            }),
                            g

                    },
                    fixPosition: function() {
                        var b = this,
                            c = b.nodeListToArray(a.all(".l-select>a"));
                        a.Array.each(c,
                            function(a) {
                                if (!a.hasClass("hidden")) {
                                    var b = a.getXY(),
                                        c = a._node.offsetHeight,
                                        d = a.siblings(".l-tabox").item(0);
                                    d.setXY([b[0] - 1, b[1] + c - 1])

                                }

                            })

                    },
                    fixSize: function() {
                        var b = this,
                            c = b.nodeListToArray(a.all(".l-select>a"));
                        a.Array.each(c,
                            function(b) {
                                var c = b._node.offsetWidth + 10,
                                    d = b.siblings(".l-tabox").item(0);
                                if (!d.hasClass("hidden")) {
                                    d.setStyle("width", "auto");
                                    var e = d._node.offsetWidth - 2;
                                    if (c > e ? d.setStyle("width", c) : d.setStyle("width", e), a.UA.ie && a.UA.ie <= 7) {
                                        var f = d.all("ul"),
                                            g = 0;
                                        a.Array.each(f._nodes,
                                            function(b) {
                                                g += parseInt(a.one(b).get("region").width)

                                            }),
                                            d.setStyle("width", --g)

                                    }

                                }

                            })

                    },
                    bindEvent: function() {
                        var b = this;
                        a.one(".J_filter").on("mouseout",
                            function() {
                                var c = a.all(".l-select"),
                                    d = a.all(".l-tabox");
                                b.timer && clearTimeout(b.timer),
                                    b.timer = setTimeout(function() {
                                            c.removeClass("l-current"),
                                                d.addClass("hidden")

                                        },
                                        300)

                            }),
                            a.one(".J_filter").on("mouseover",
                                function(a) {
                                    a.target.ancestor(".l-select") && b.timer && clearTimeout(b.timer)

                                }),
                            a.delegate("mouseover",
                                function(c) {
                                    var d = c.currentTarget,
                                        e = d.getXY(),
                                        f = d._node.offsetWidth,
                                        g = d._node.offsetHeight,
                                        h = d.ancestor(".l-select"),
                                        i = d.siblings(".l-tabox").item(0),
                                        j = a.all(".l-select"),
                                        k = a.all(".l-tabox");
                                    i.setStyle("width", "auto"),
                                        j.removeClass("l-current"),
                                        k.addClass("hidden"),
                                        h.addClass("l-current"),
                                        i.one("ul") && i.removeClass("hidden");
                                    var l = i._node.offsetWidth - 2;
                                    f > l ? i.setStyle("width", f) : i.setStyle("width", l),
                                        i.setStyle("position", "absolute"),
                                        i.setXY([e[0] - 1, e[1] + g - 1]),
                                        b.fixPosition(),
                                        b.fixSize(),
                                        h.setStyle("overflow", "hidden"),
                                        b.timer && clearTimeout(b.timer)

                                },
                                ".flight-filter", ".l-select>a"),
                            a.delegate("click",
                                function(c) {
                                    var d = c.target,
                                        e = d.ancestor(".l-item"),
                                        f = e.getAttribute("data-value").split("::"),
                                        g = a.Lang.sub('input[name="{name}"][value="{value}"]', {
                                            name: f[0],
                                            value: f[1]

                                        });
                                    return a.one(g).set("checked", !1),
                                        e.remove(),
                                        0 == b.getChecked('.flight-filter input[type="checkbox"]')._nodes.length && a.one(".J_TagsBox").addClass("hidden"),
                                        a.one(g).getAttribute("data-async") ? ((!a.UA.ie || a.UA.ie && a.UA.ie > 8) && a.one(g).set("checked", !0), void a.Event.simulate(a.one(g)._node, "click")) : void b.flushFilterData()

                                },
                                ".flight-filter", "a.l-remove"),
                            a.delegate("click",
                                function(a) {
                                    b.doFilter(a.target)

                                },
                                ".flight-filter", 'input[type="checkbox"]'),
                            a.delegate("click",
                                function(a) {
                                    var c = a.currentTarget,
                                        d = c.ancestor(".title");
                                    if (b.toggleTitle(d.all(".l-current a em")), b.sortBy = c.getAttribute("sort-by"), c.ancestor(".l-current") ? c.toggleClass("l-reverse") : b.toggleTitle(c), d.all(".l-button").filter(".l-current").removeClass("l-current"), c.ancestor(".l-button").addClass("l-current"), c.hasClass("l-reverse")) {
                                        var e = b.sortBy.split("::");
                                        "asc" == e[1] && (b.sortBy = e[0] + "::desc"),
                                            "desc" == e[1] && (b.sortBy = e[0] + "::asc")

                                    }
                                    b.flushFilterData()

                                },
                                ".title", ".l-button a em")

                    },
                    doFilter: function(b) {
                        var c = this,
                            d = '<span class="l-item" data-value="{name}::{value}"><span>{info}<a href="javascript:;" class="l-remove">X</a></span></span>',
                            e = {
                                name: b.getAttribute("name"),
                                value: b.getAttribute("value"),
                                info: b.siblings("label").item(0).getContent()

                            };
                        if (6 == a.UA.ie || 7 == a.UA.ie) var f = a.all(".flight-filter .l-content .l-item"),
                            g = "data-value",
                            h = a.Lang.sub("{name}::{value}", e),
                            i = c.getOneByAttribute(f, g, h);
                        else var i = a.one(a.Lang.sub('[data-value="{name}::{value}"]', e));
                        if ("radio" == b.getAttribute("data-type")) {
                            var j = b.ancestor("a");
                            if (j.hasClass("current")) j.removeClass("current");
                            else {
                                var k = j.ancestor("ul").one("a.current input");
                                if (k) {
                                    var l = {
                                            name: k.getAttribute("name"),
                                            value: k.getAttribute("value"),
                                            info: k.siblings("label").item(0).getContent()

                                        },
                                        m = a.one(a.Lang.sub('[data-value="{name}::{value}"]', l));
                                    k.ancestor("a").removeClass("current"),
                                        k.set("checked", !1),
                                        m && m.remove()

                                }
                                j.addClass("current")

                            }
                            b.ancestor("div").addClass("hidden"),
                                b.ancestor(".l-select").removeClass("l-current")

                        }
                        b._node.checked && !i && (a.one(".J_Tags").append(a.Lang.sub(d, e)), a.one(".J_TagsBox").removeClass("hidden")),
                            b._node.checked || i && i.remove(),
                            0 == c.getChecked('.flight-filter input[type="checkbox"]')._nodes.length && a.one(".J_TagsBox").addClass("hidden"),
                            1 != b.getAttribute("data-async") && (c.flushFilterData(), c.fixPosition())

                    }

                }

        },
        "", {
            requires: ["node-base", "filter-css", "event-simulate", "trip-storage-lite"]

        });
/*! Generated by Clam: et 2014-07-11 11:06:15 */
YUI.namespace("Y.pageTpl"),
    YUI.add("template",
        function(a) {
            a.pageTpl = {
                plane: '{@if picUrl}<div class="plane-img"><ul class="plane-base"><li>${manufactruer}${flight_type}</li><li>${planeModel}</li><li>\u6700\u5c11\u5ea7\u4f4d\u6570${minSeat}</li><li>\u6700\u591a\u5ea7\u4f4d\u6570${maxSeat}</li></ul><div class="plane-img-main" style="width:${width}px;"><img src="${picUrl}" /></div><ul class="plane-info"><li class="plane-fcabin">\u5934\u7b49\u8231</li><li class="plane-ecabin">\u7ecf\u6d4e\u8231</li><li class="plane-wc">\u6d17\u624b\u95f4</li><li class="plane-out">\u9003\u751f\u51fa\u53e3</li><li class="plane-tips">\u56fe\u7247\u4ec5\u4f9b\u53c2\u8003</li></ul></div>{@else}<table class="plane-type"><tr><th class="fistNode">\u673a\u578b</th><th>\u673a\u578b\u540d\u79f0</th><th>\u7c7b\u578b</th><th>\u6700\u5c11\u5ea7\u4f4d\u6570</th><th>\u6700\u591a\u5ea7\u4f4d\u6570</th></tr><tr><td class="fistNode">${flight_type}</td><td>${flightDesc}</td><td>${planeModel}</td><td>${minSeat}</td><td>${maxSeat}</td></tr></table>{@/if}',
                oneItem: '<div class="item clearfix J_onePlane"  data-id="${id}" data-flightNo="${flightNo}"><table><tr><td class="company"><span class="pi-flightlogo-nl pi-flightlogo-nl-${airlineCode}">${airLineName} <strong>${flightNo}</strong><br /><span class="gray">${flightTypeName}<a href="javascript:void(0)" class="link J_PlaneType J_dataSpm" data-spm-click="gostr=/tbtrip;locaid=d${index}1">${flightType}</a></span></span>{@if stop}<a href="javascript:void(0)" class="link stop J_stop J_dataSpm" data-spm-click="gostr=/tbtrip;locaid=d${index}2">\u7ecf\u505c</a>{@/if}{@if carrier}<a href="javascript:void(0)" class="link share J_share J_dataSpm" data-spm-click="gostr=/tbtrip;locaid=d${index}2">\u5171\u4eab</a>{@/if}</td><td class="time"><b>${depTime}</b><span class="gray">${arrTime} {@if isNextDay}<a href="javascript:void(0)" class="J_nextDay J_dataSpm next-day link" data-spm-click="gostr=/tbtrip;locaid=d${index}3">\u7b2c<em>2</em>\u5929</a>{@/if}</span></td><td class="port">${depAirPortName}${depTerm}<br/>${arrAirPortName}${arrTerm}</td>{@if isShop}<td class="rule">{@if cabin}<a href="javascript:;" class="link fl J_rule J_dataSpm" data-spm-click="gostr=/tbtrip;locaid=d${index}4">${cabin.tui}</a>{@if supplyBill}<span data-content="${cabin.billInfo}"   class="J_otherRule  J_dataSpm  bill-icon" data-spm-click="gostr=/tbtrip;locaid=d${index}5">\u53d1\u7968</span>{@/if}{@/if}</td>{@/if}<td class="wprice"><table>{@if cabin.insurePrice && isShop}<tr class="has-insure"><td class="price-info">{@if cabin.activeInsurePrice}<p class="price-line"><span class="rmb">&yen;</span><em>${cabin.insurePrice}</em></p>{@/if}<p><span class="price"><span class="rmb">&yen;</span><em class="J_cPrice">${cabin.finalInsurePrice}</em></span><span class="insure"> + <span class="rmb">&yen;</span><span class="J_insure" {@if !cabin.forceInsure}data-price="${cabin.freePrice}"{@/if}>${cabin.baseInsurePrice}</span>\u4fdd\u9669</span></p>{@if cabin.cpInsureInfo}<p class="cpinfo">${cabin.cpInsureInfo}</p>{@/if}</td><td class="operate"><a class="operate-btn reserve J_reserve {@if !isReserve}reserve-disable{@/if}" href="javascript:;" data-insure="1" data-goldid="${insureId}" data-spm-click="gostr=/tbtrip;locaid=d${index}6">{@if cabin.isApply}\u7533\u8bf7{@/if}{@if !cabin.isApply}{@if !isRoundAndDep}\u9884\u8ba2{@/if}{@if isRoundAndDep}\u9009\u5b9a\u53bb\u7a0b{@/if}{@/if}</a></td><td class="active">{@if cabin.activityId}<span class="ticket-activity J_otherRule J_dataSpm" data-spm-click="gostr=/tbtrip;locaid=d${index}7" data-activityId="${cabin.activityId}" data-content="${cabin.activityDesc}" {@if cabin.activeIcon}style="background:url(${cabin.activeIcon}) 0 0 no-repeat;"{@/if}>\u6d3b\u52a8\u7968</span>{@/if}{@if cabin.isCabinLess}<span class="ticket-alert J_less J_dataSpm" data-spm-click="gostr=/tbtrip;locaid=d${index}8" data-content="\u6b64\u4ef7\u683c\u7968\u91cf\u8fd8\u5269${cabin.cabinNum}\u5f20">\u5269${cabin.cabinNum}\u5f20</span>{@/if}</td></tr>{@/if}{@if !isShop || (isShop && !cabin.forceInsure)}<tr>{@if !isShop}<td class="price-info">{@if cabin.bonus}<span class="price-line"><span class="rmb">&yen;</span><em>${cabin.originalPrice}</em>{@if cabin.isShowDis}<span class="discount discount-num">${cabin.originalDiscount}</span>{@/if}{@if !cabin.isShowDis}<span class="discount">${cabin.cabinClassName}</span>{@/if}</span>{@/if}<p><span class="price"><span class="rmb">&yen;</span><em class="J_cPrice">${cabin.allFinalPrice}</em>{@if cabin.isShowDis}<span class="discount discount-num">${cabin.allFinalDiscount} </span>{@/if}{@if !cabin.isShowDis}<span class="discount">${cabin.cabinClassName}</span>{@/if}</span></p>{@if cabin.finalInfo}<p class="cpinfo">${cabin.finalInfo}</p>{@/if}</td>{@/if}{@if isShop && !cabin.forceInsure}<td class="price-info">{@if cabin.bonus}<span class="price-line"><span class="rmb">&yen;</span><em>${cabin.price}</em></span>{@/if}<p><span class="price"><span class="rmb">&yen;</span><em class="J_cPrice">${cabin.finalPrice}</em></span></p>{@if cabin.cpinfo}<p class="cpinfo">${cabin.cpinfo}</p>{@/if}</td>{@/if}<td class="operate">{@if !isShop}<a href="javascript:;" class="operate-btn choose J_moreSupply" data-spm-click="gostr=/tbtrip;locaid=d${index}6"><em>\u9009\u62e9</em></a>{@if hasActivity}<a href="javascript:;" class="J_springFestival spring-festival J_dataSpm" data-spm-click="gostr=/tbtrip;locaid=d${index}11">\u8e0f\u6625\u6e38\u597d\u793c</a>{@/if}{@/if}{@if isShop}<a href="javascript:;" class="operate-btn reserve J_reserve {@if !isReserve}reserve-disable{@/if}" data-spm-click="gostr=/tbtrip;locaid=d${index}6">{@if cabin.isApply}\u7533\u8bf7{@/if}{@if !cabin.isApply}{@if !isRoundAndDep}\u9884\u8ba2{@/if}{@if isRoundAndDep}\u9009\u5b9a\u53bb\u7a0b{@/if}{@/if}</a>{@/if}</td><td class="active">{@if cabin.activityId}<span class="ticket-activity J_otherRule J_dataSpm" data-activityId="${cabin.activityId}" data-content="${cabin.activityDesc}" data-spm-click="gostr=/tbtrip;locaid=d${index}7"  {@if cabin.activeIcon}style="background:url(${cabin.activeIcon}) 0 0 no-repeat;"{@/if}>\u6d3b\u52a8\u7968</span>{@/if}{@if cabin.isCabinLess}<span class="ticket-alert J_less J_dataSpm" data-spm-click="gostr=/tbtrip;locaid=d${index}8" data-content="\u6b64\u4ef7\u683c\u7968\u91cf\u8fd8\u5269${cabin.cabinNum}\u5f20">\u5269${cabin.cabinNum}\u5f20</span>{@/if}</td></tr>{@/if}{@if isShop}<tr><td ><a href="javascript:;" class="J_moreSupply discount-link" data-spm-click="gostr=/tbtrip;locaid=d${index}10"><span class="fl">\u66f4\u591a\u6298\u6263</span><span class="icon"></span></a></td><td class="apply">{@if cabin.isApply}<a href="javascript:void(0)" class="link J_special J_dataSpm" data-apply="1" data-spm-click="gostr=/tbtrip;locaid=d${index}12">\u4ec0\u4e48\u662f\u7533\u8bf7</a>{@/if}</td><td></td></tr>{@/if}</table></td></tr></table>{@if isShop}<div class="other-price"><div>\u71c3\u6cb9\u9644\u52a0\u8d39\uff1a&yen;${oilPrice}</div><div>\u673a\u573a\u5efa\u8bbe\u8d39\uff1a&yen;${buildPrice}</div></div>{@/if}</div>',
                supplyBody: '<div class="supply clearfix J_Supply" style="margin-top:-${height}px"  data-spm="a315n"><div class="operate-supply" style="height:${height}px"><div></div></div><div class="supply-body"><div class="supply-info J_supplyInfo"><ul><li class="first-node"><span class="current"><input type="radio" name="${id}" id="economic_${id}" value="0" class="J_moreSupply" checked/><label for="economic_${id}">\u6700\u4f4e\u4ef7</label></span></li><li><span><input type="radio" class="J_moreSupply" name="${id}" id="allEconomic_${id}" value="1"/><label for="allEconomic_${id}">\u9ad8\u7aef\u5927\u6c14\u4e0a\u6863\u6b21</label></span></li></ul><span class="bprice">\u673a\u5efa+\u71c3\u6cb9\uff1a<span class="rmb">&yen;</span><em class="b">${totalPrice}</em></span></div><div class="J_supplyMain supply-list"><div class="loading"><p></p><img src="http://img01.taobaocdn.com/tps/i1/T1T41TXkBgXXXXXXXX-155-11.gif" /></div></div></div></div>',
                supplyMore: '<div class="supply-more J_supplyMore J_oAgentList"><span class="fl">\u66f4\u591a</span><em class="icon"></em></div>',
                supplyLess: '<div class="supply-more supply-less J_supplyLess J_oAgentList"><span class="fl">\u6536\u8d77</span><em class="icon"></em></div>',
                shopSupplyBody: '<div class="supply J_Supply"><div class="supply-inner"><div class="J_supplyMain supply-list"><div class="loading"><p></p><img src="http://img01.taobaocdn.com/tps/i1/T1T41TXkBgXXXXXXXX-155-11.gif" /></div></div></div></div>',
                supplyLoading: '<div class="loading"><p>${msg}</p><img src="http://img01.taobaocdn.com/tps/i1/T1T41TXkBgXXXXXXXX-155-11.gif" /></div>',
                moreSupplyTitle: '<table class="supply-title J_moreSupplyTitle">{@if !shop}{@if score}<th class="agent supply-sort"><span class="p35">\u5356\u5bb6 &nbsp; </span>{@if sortBy == 1}<a href="javascript:;" class="J_agentSort current" data-spm-click="gostr=/tbtrip;locaid=d1" title="\u70b9\u51fb\u670d\u52a1\u8bc4\u5206\u7531\u9ad8\u5230\u4f4e" data-des="\u70b9\u51fb\u670d\u52a1\u8bc4\u5206\u7531\u9ad8\u5230\u4f4e"  data-asc="\u70b9\u51fb\u670d\u52a1\u8bc4\u5206\u7531\u4f4e\u5230\u9ad8" data-sortType="Service" data-sortBy="asc"><span><em class="sort-up">\u670d\u52a1\u8bc4\u5206</em></span></a>{@/if}{@if sortBy == -1}<a href="javascript:;" class="J_agentSort current" data-spm-click="gostr=/tbtrip;locaid=d1" title="\u70b9\u51fb\u670d\u52a1\u8bc4\u5206\u7531\u4f4e\u5230\u9ad8" data-des="\u70b9\u51fb\u670d\u52a1\u8bc4\u5206\u7531\u9ad8\u5230\u4f4e"  data-asc="\u70b9\u51fb\u670d\u52a1\u8bc4\u5206\u7531\u4f4e\u5230\u9ad8" data-sortType="Service" data-sortBy="des"><span><em>\u670d\u52a1\u8bc4\u5206</em></span></a>{@/if}</th>{@/if}{@if !score}<th class="agent supply-sort"><span class="p35">\u5356\u5bb6 &nbsp; </span><a href="javascript:;" class="J_agentSort"  data-spm-click="gostr=/tbtrip;locaid=d1" title="\u70b9\u51fb\u670d\u52a1\u8bc4\u5206\u7531\u9ad8\u5230\u4f4e" data-des="\u70b9\u51fb\u670d\u52a1\u8bc4\u5206\u7531\u9ad8\u5230\u4f4e"  data-asc="\u70b9\u51fb\u670d\u52a1\u8bc4\u5206\u7531\u4f4e\u5230\u9ad8" data-sortType="Service" data-sortBy="des"><span><em>\u670d\u52a1\u8bc4\u5206</em></span></a></th>{@/if}{@/if}<th class="cabin"><span>\u8231\u4f4d</span></th><th class="rule">\u8ba2\u7968\u89c4\u5219</th><th class="speed"></th><th class="wprice supply-sort">{@if price}{@if sortBy == -1}<a href="javascript:;" class="J_agentSort current"  data-spm-click="gostr=/tbtrip;locaid=d2" title="\u70b9\u51fb\u8be5\u822a\u73ed\u4ef7\u683c\u7531\u4f4e\u5230\u9ad8" data-des="\u70b9\u51fb\u8be5\u822a\u73ed\u4ef7\u683c\u7531\u9ad8\u5230\u4f4e" data-asc="\u70b9\u51fb\u8be5\u822a\u73ed\u4ef7\u683c\u7531\u4f4e\u5230\u9ad8" data-sortType="Price" data-sortBy="des"><span><em>\u673a\u7968\u4ef7\u683c(\u4e0d\u542b\u7a0e\u8d39)</em></span></a>{@/if}{@if sortBy == 1}<a href="javascript:;" class="J_agentSort current" data-spm-click="gostr=/tbtrip;locaid=d2" title="\u70b9\u51fb\u8be5\u822a\u73ed\u4ef7\u683c\u7531\u9ad8\u5230\u4f4e" data-des="\u70b9\u51fb\u8be5\u822a\u73ed\u4ef7\u683c\u7531\u9ad8\u5230\u4f4e" data-asc="\u70b9\u51fb\u8be5\u822a\u73ed\u4ef7\u683c\u7531\u4f4e\u5230\u9ad8" data-sortType="Price" data-sortBy="asc"><span><em class="sort-up">\u673a\u7968\u4ef7\u683c(\u4e0d\u542b\u7a0e\u8d39)</em></span></a>{@/if}{@/if}{@if !price}<a href="javascript:;" class="J_agentSort" data-spm-click="gostr=/tbtrip;locaid=d2" title="\u70b9\u51fb\u8be5\u822a\u73ed\u4ef7\u683c\u7531\u4f4e\u5230\u9ad8" data-des="\u70b9\u51fb\u8be5\u822a\u73ed\u4ef7\u683c\u7531\u9ad8\u5230\u4f4e" data-asc="\u70b9\u51fb\u8be5\u822a\u73ed\u4ef7\u683c\u7531\u4f4e\u5230\u9ad8" data-sortType="Price" data-sortBy="asc"><span><em  class="sort-up">\u673a\u7968\u4ef7\u683c(\u4e0d\u542b\u7a0e\u8d39)</em></span></a>{@/if}</th></table>',
                supplyItem: '<div class="supply-item J_oneSupply" data-id=${id}><table><tr>{@if !isShop}<td class="agent">{@if isQiJian}<div class="p35 {@if directGov}zhilian{@else}qijian{@/if}"><span class="pi-flightlogo-qjd pi-flightlogo-qjd-${airlineCode}" title="${airLineName}\u76f4\u8425\u5e97"></span>{@else}<div class="p35"><span class="J_wwNick ww-nick" data-spm-click="gostr=/tbtrip;locaid=d${id}1">${nickName}</span>{@/if}{@if !speedIssueTicket}<span class="J_WangWang" data-nick="${ww}" data-icon="small" data-spm-click="gostr=/tbtrip;locaid=d${id}1"></span>{@/if}</div>{@if comment}<div class="p35 comment-score">{@if comment.score}<a href="javascript:;" class="score-link  J_Score" data-spm-click="gostr=/tbtrip;locaid=d${id}2">${comment.score}</a>{@/if}{@if !comment.score}<span class="gray bold">${comment.score}</span>{@/if} {@if comment.feed}<a href="javascript:;" class="comment-link J_Comment" data-spm-click="gostr=/tbtrip;locaid=d${id}3"><span class="fl">\u8bc4\u4ef7(${comment.feed})</span><em class="icon"></em></a>{@/if}{@if !comment.feed}<span class="gray comment-link">\u8bc4\u4ef7(${comment.feed})</span>{@/if}</div>{@/if}</td>{@/if}<td class="cabin">${specialType}{@if specialAttributes}<span class="J_special special-icon J_sepcialCabin" data-content="${specialAttributes}"  data-spm-click="gostr=/tbtrip;locaid=d${id}4"> &nbsp; </span>{@/if}</td><td class="rule"><a href="javascript:;" class="link fl J_rule"  data-spm-click="gostr=/tbtrip;locaid=d${id}5">${tui}</a>{@if supplyBill}<span data-content="${billInfo}" class="J_otherRule bill-icon" data-spm-click="gostr=/tbtrip;locaid=d${id}6">\u53d1\u7968</span>{@/if}</td><td class="speed">{@if speedIssueTicket}<span class="speed-icon J_otherRule" data-content="\u5356\u5bb6\u4fdd\u8bc1\u6b64\u673a\u79683\u5206\u949f\u4e4b\u5185\u51fa\u7968\u6210\u529f" data-spm-click="gostr=/tbtrip;locaid=d${id}7"></span>{@/if}</td><td class="wprice"><table>{@if insurePrice}<tr class="has-insure"><td class="price-info">{@if bonus}<p class="price-line"><span class="rmb">&yen;</span><em>${insurePrice}</em></p>{@/if}<p><span class="price"><span class="rmb">&yen;</span><em class="J_cPrice">${finalInsurePrice}</em></span><span class="insure"> + <span class="rmb">&yen;</span><span class="J_insure"  {@if !forceInsure}data-price="${freePrice}"{@/if}>${baseInsurePrice}</span>\u4fdd\u9669</span></p>{@if cpInsureInfo}<p class="cpinfo">${cpInsureInfo}</p>{@/if}</td><td class="operate"><a class="operate-btn reserve J_reserve {@if !isReserve}reserve-disable{@/if}"  data-spm-click="gostr=/tbtrip;locaid=d${id}8" href="javascript:;" data-insure="1" data-goldid="${insureId}">{@if isApply}\u7533\u8bf7{@/if}{@if !isApply}{@if !isRoundAndDep}\u9884\u8ba2{@/if}{@if isRoundAndDep}\u9009\u5b9a\u53bb\u7a0b{@/if}{@/if}</a></td><td class="active">{@if activityId}<span class="ticket-activity J_otherRule" data-spm-click="gostr=/tbtrip;locaid=d${id}9" data-content="${activityDesc}" {@if activeIcon}style="background:url(${activeIcon}) 0 0 no-repeat;"{@/if}>\u6d3b\u52a8\u7968</span>{@/if}{@if isCabinLess}<span class="ticket-alert J_less" data-spm-click="gostr=/tbtrip;locaid=d${id}10" data-content="\u6b64\u4ef7\u683c\u7968\u91cf\u8fd8\u5269${cabinNum}\u5f20">\u5269${cabinNum}\u5f20</span>{@/if}</td></tr>{@/if}{@if !forceInsure}<tr><td class="price-info">{@if activityId && bonus}<span class="price-line"><span class="rmb">&yen;</span><em>${price}</em></span>{@/if}<p><span class="price"><span class="rmb">&yen;</span><em class="J_cPrice">${finalPrice}</em></span></p>{@if cpinfo}<p class="cpinfo">${cpinfo}</p>{@/if}</td><td class="operate"><a class="operate-btn reserve J_reserve {@if !isReserve}reserve-disable{@/if}" data-spm-click="gostr=/tbtrip;locaid=d${id}8" href="javascript:;" data-goldid="${goldId}">{@if isApply}\u7533\u8bf7{@/if}{@if !isApply}{@if !isRoundAndDep}\u9884\u8ba2{@/if}{@if isRoundAndDep}\u9009\u5b9a\u53bb\u7a0b{@/if}{@/if}</a></td><td class="active">{@if activityId}<span class="ticket-activity J_otherRule" data-spm-click="gostr=/tbtrip;locaid=d${id}9" data-content="${activityDesc}" {@if activeIcon}style="background:url(${activeIcon}) 0 0  no-repeat;"{@/if}>\u6d3b\u52a8\u7968</span>{@/if}{@if isCabinLess}<span class="ticket-alert J_less" data-spm-click="gostr=/tbtrip;locaid=d${id}10" data-content="\u6b64\u4ef7\u683c\u7968\u91cf\u8fd8\u5269${cabinNum}\u5f20">\u5269${cabinNum}\u5f20</span>{@/if}</td></tr>{@/if}{@if isApply}<tr><td></td><td class="apply"><a href="javascript:void(0)" class="link J_special" data-apply="1" data-spm-click="gostr=/tbtrip;locaid=d${id}11">\u4ec0\u4e48\u662f\u7533\u8bf7</a></td><td></td></tr>{@/if}</table></td></tr></table></div>',
                comment: '<div class="comment J_comment"><div class="J_commentList comment-body"><div class="loading"><p>\u6b63\u5728\u83b7\u53d6\u8bc4\u4ef7\u4fe1\u606f...</p><img src="http://img01.taobaocdn.com/tps/i1/T1T41TXkBgXXXXXXXX-155-11.gif" /></div></div><em class="icon" style="left:${left}px"></em><span class="close J_close">\u5173\u95ed</span></div>',
                commentList: '<table>{@each rateList as item}<tr><td class="comment-detail">$${item.rateContent}</td><td class="comment-user">{@if !item.anony}<a href="${item.displayUserLink}" target="_blank" class="nick-name">${item.displayUserNick}</a><br/>{@if item.dispalyRateDis}<a target="_blank" href="${item.displayUserRateLink}" class="level"><img alt="${item.dispalyRateDis}\u4e2a" title="${item.dispalyRateDis}\u4e2a\u4e70\u5bb6\u4fe1\u7528\u79ef\u5206\uff0c\u8bf7\u70b9\u51fb\u67e5\u770b\u8be6\u60c5" src="http://pics.taobaocdn.com/newrank/${item.displayRatePic}" /></a>{@/if}{@if item.vipLevel}<a target="_blank" class="level" href="http://vip.taobao.com/vip_club.htm"><img title="${item.levelName}"  src="${item.userVipImg}"/></a>{@/if}{@/if}{@if item.anony}<span class="nick-name">${item.displayUserNick}</span><br/>{@if item.dispalyRateDis}<img class="level" alt="$item.dispalyRateDis}\u4e2a" title="${item.dispalyRateDis}\u4e2a\u4e70\u5bb6\u4fe1\u7528\u79ef\u5206\uff0c\u8bf7\u70b9\u51fb\u67e5\u770b\u8be6\u60c5" src="http://pics.taobaocdn.com/newrank/${item.displayRatePic}" />{@/if}{@if item.vipLevel}<a target="_blank" class="level" href="http://vip.taobao.com/vip_club.htm"><img title="${item.levelName}"  src="${item.userVipImg}"/></a>{@/if}{@/if}</td></tr>{@/each}</table>{@if isShow}<div class="page"><span>\u7b2c${currentPage}\u9875</span>{@if hasPre}<a href="javascript:;" class="J_prePage">&lt;</a>{@/if}{@if hasNext}<a href="javascript:;" class="J_nextPage">&gt;</a>{@/if}</div>{@/if}',
                score: '<ul class="score-detail clearfix"><li><div class="score-detail-total">\u7efc\u5408\u670d\u52a1\u8bc4\u5206</div><div class="score-detail-total">\u7ed3\u679c</div><div class="score-detail-compare">\u4e0e\u540c\u884c\u76f8\u6bd4</div></li>{@each details as item}<li><div class="score-detail-total"><span class="score-detail-b">${item.name}\uff1a </span></div><div class="score-detail-total"><span class="score-detail-star score-detail-star${item.value}"></span></div><div class="score-detail-compare"><span class="${item.className}"><s>${item.compare}</s>{@if item.diffValue}<em class="score-detail-b">${item.diffValue}</em>{@/if}&nbsp;</span></div></li>{@/each} </ul>',
                depTrip: '<div class="place-info has-trans J_onePlane clearfix"><div class="trip-name J_tripName"  data-id="${id}">\u53bb\u7a0b\u822a\u73ed<br/>\u5df2\u9009\u62e9<em></em></div><table><tr><td class="company"><span class="ne-flag ne-flag-{airlineCode}">{airLineName} <b>${flightNo}</b><br/><span class="gray">\u673a\u578b<a href="javascript:void(0)" class="link J_PlaneType">${flightType}</a></span></span></td><td class="time">\u8d77\u98de\uff1a<em>${depDay} ${depTime}</em><br/>\u62b5\u8fbe\uff1a${depDay} ${arrTime}</td><td class="port">${depAirPortName}${depTerm} <br/> ${arrAirPortName}${arrTerm}</td><td class="other">\u5355\u7a0b\u7968\u4ef7\uff1a<span class="price">&yen;{price}</span><a href="javascript:;" class="link J_rule">\u9000\u6539\u7b7e</a><br/>\u673a\u5efa\u71c3\u6cb9\uff1a${buildPrice} + ${oilPrice}\u5143</span></td><td><span class="place-operate J_back">\u91cd\u65b0\u9009\u62e9\u53bb\u7a0b</span></td></tr></table></div>',
                filterTitle: '<ul class="filter l-content clearfix"><li class="l-head" style="margin-right:0px;">\u7b5b\u9009\u6761\u4ef6\uff1a</li><li class="btn l-select J_DepartTime"><a href="javascript:void(0)">\u8d77\u98de\u65f6\u6bb5<em class="l-arrow"></em></a><div class="l-tabox hidden" style="z-index:2007;"><ul><li><input type="checkbox" name="time" value="00:00-12:00" class="J_time4" id="J_time4"/><label for="J_time4">\u4e0a\u5348 (00:00-12:00)</label></li><li><input type="checkbox" name="time" value="12:00-18:00" class="J_time2" id="J_time2"/><label for="J_time2">\u4e0b\u5348 (12:00-18:00)</label></li><li><input type="checkbox" name="time" value="18:00-24:00" class="J_time1" id="J_time1"/><label for="J_time1">\u665a\u4e0a (18:00-24:00)</label></li></ul></div></li><li class="btn l-select J_AirLine"><a href="javascript:void(0)">\u822a\u7a7a\u516c\u53f8<em class="l-arrow"></em></a><div class="l-tabox hidden J_AirLineList" style="z-index:2020;"></div></li><li class="btn l-select J_agentType"><a href="javascript:void(0)">\u8231\u4f4d\u7c7b\u578b<em class="l-arrow"></em></a><div class="l-tabox l-passengernum hidden J_checkbox" style="z-index:2015;"><ul><li><a href="javascript:;"><input type="checkbox" id="J_cabin3" data-type="radio"  name="agentType" value="1" data-async="1" /><label for="J_cabin3">\u7ecf\u6d4e\u8231</label></a></li><li><a href="javascript:;"><input type="checkbox" id="J_cabin2" data-type="radio"  name="agentType" value="4" data-async="1" /><label for="J_cabin2">\u5546\u52a1\u5934\u7b49\u8231</label></a></li><li><a href="javascript:;"><input type="checkbox" id="J_cabin1" data-type="radio"  name="agentType" value="0" data-async="1" /><label for="J_cabin1">\u6240\u6709\u8231\u4f4d</label></a></li></ul></div></li>{@if isAirPort}<li class="btn l-select J_Airport"><a href="javascript:void(0)">${airPortName}\u673a\u573a<em class="l-arrow"></em></a><div class="l-tabox hidden J_AirportList" style="z-index:2010;"></div></li>{@/if}{@if isPassengerNum}<li class="btn l-select J_passengerNum"><a href="javascript:void(0)">\u4e58\u5ba2\u4eba\u6570<em class="l-arrow"></em></a><div class="l-tabox hidden l-passengernum J_passengerNumList J_checkbox" style="z-index:2005;"><ul><li><a href="javascript:;"><input type="checkbox" id="passenger1" data-type="radio"  name="cabinNum" value="1" data-async="1" /><label for="passenger1">1\u4eba</label></a></li><li><a href="javascript:;"><input type="checkbox" id="passenger2" data-type="radio"  name="cabinNum" value="2" data-async="1" /><label for="passenger2">2\u4eba</label></a></li><li><a href="javascript:;"><input type="checkbox" id="passenger3" data-type="radio"  name="cabinNum" value="3" data-async="1" /><label for="passenger3">3\u4eba</label></a></li><li><a href="javascript:;"><input type="checkbox" id="passenger4" data-type="radio"  name="cabinNum" value="4" data-async="1" /><label for="passenger4">4\u4eba</label></a></li><li><a href="javascript:;"><input type="checkbox" id="passenger5" data-type="radio"  name="cabinNum" value="5" data-async="1" /><label for="passenger5">5\u4eba</label></a></li><li><a href="javascript:;"><input type="checkbox" id="passenger6" data-type="radio"  name="cabinNum" value="6" data-async="1" /><label for="passenger6">6\u4eba</label></a></li><li><a href="javascript:;"><input type="checkbox" id="passenger7" data-type="radio"  name="cabinNum" value="7" data-async="1" /><label for="passenger7">7\u4eba</label></a></li><li><a href="javascript:;"><input type="checkbox" id="passenger8" data-type="radio"  name="cabinNum" value="8" data-async="1" /><label for="passenger8">8\u4eba</label></a></li><li><a href="javascript:;"><input type="checkbox" id="passenger9" data-type="radio"  name="cabinNum" value="9" data-async="1" /><label for="passenger9">9\u4eba\u53ca\u4ee5\u4e0a</label></a></li></ul></div></li>{@/if}<li><input type="checkbox" class="J_bill" value="1" data-async="1" name="supplyItinerary" id="J_bill" /><label for="J_bill">\u63d0\u4f9b\u53d1\u7968</label></li>{@if activityName}<li><div class="J_actTicketCheckbox act-ticket-checkbox"><div class="head"></div><div class="body"><input type="checkbox" {@if xuanpinOnly==="true"} checked {@/if} class="J_activity" value="1" data-async="1" name="activityTicket" id="J_activity" /><label for="J_activity">${activityName}</label></div><div class="foot"></div></div></li>{@/if}</ul><div class="l-line l-content J_TagsBox hidden"><span class="l-head">\u60a8\u5df2\u9009\u62e9\uff1a</span><div class="l-selected J_Tags"></div></div>',
                share: "\u5b9e\u9645\u4e58\u5750\u822a\u73ed\uff1a${carrierName}${carrier}",
                stop: "\u7ecf\u505c\u57ce\u5e02\uff1a${stopCity}<br/>\u5230\u8fbe\u65f6\u95f4\uff1a${stopArrTime}<br/>\u8d77\u98de\u65f6\u95f4\uff1a${stopDepTime}",
                timeTips: "\u5230\u8fbe\u65f6\u95f4\u4e3a\u7b2c2\u5929 <br/>${arrDate}",
                flashHtml: '<div class="chart"><h5><span class="fl"><em>${depCityName}-${arrCityName}</em> \u672a\u676530\u65e5\u4ef7\u683c\u8d8b\u52bf </span><span class="note">\u673a\u7968\u4ef7\u683c\u5b9e\u65f6\u53d8\u5316\uff0c\u8bf7\u4ee5\u5b9e\u9645\u8d2d\u7968\u4ef7\u683c\u4e3a\u51c6\u3002</span></h5><div id="J_chart"></div></div>',
                noLowpriceTips: '<div class="J_agentError error-s">\u6b64\u822a\u73ed\u6240\u6709\u7ecf\u6d4e\u8231\u673a\u7968\u5df2\u552e\u5b8c</div>',
                noGaoduanTips: '<div class="J_agentError error-s">\u6b64\u822a\u73ed\u6240\u6709\u5546\u52a1\u5934\u7b49\u8231\u673a\u7968\u5df2\u552e\u5b8c</div>'

            }

        });
/*! Generated by Clam: et 2014-07-11 11:06:15 */
YUI.namespace("Y.filterTitle"),
    YUI.add("filter-title",
        function(a) {
            a.filterTitle = function(b, c, d) {
                var e = this;
                e.tpl = a.pageTpl.filterTitle,
                    e.node = b

            },
                a.filterTitle.prototype = {
                    render: function(b, c) {
                        var d = this,
                            e = a.juicer(d.tpl, b);
                        d.node.setContent(e),
                            d.node.setStyle("display", "block"),
                            setTimeout(function() {
                                    d.node.setStyle("opacity", 1)

                                },
                                1),
                            c && c()

                    },
                    hide: function() {
                        var a = this;
                        a.node.setStyles({
                            display: "none",
                            opacity: 0

                        })

                    }

                }

        },
        "", {
            requires: ["node", "event-delegate", "template", "juicer"]

        });
/*! Generated by Clam: et 2014-07-11 11:06:15 */
YUI.namespace("Y.checkUrl"),
    YUI.add("check-url",
        function(a) {
            var b = /^(\d{2,4})-(?:[0]?)(\d{1,2})-(?:[0]?)(\d{1,2})$/;
            a.checkUrl = function(c) {
                for (var d = ["depCity", "arrCity", "depDate", "arrDate"], e = ["noDepCityName", "noArrCityName", "noDepDate", "noArrDate"], f = 0, g = d.length; g > f; f++) {
                    if ("arrDate" != d[f] && a.common.isNull(c[d[f]])) return e[f];
                    if ("arrDate" == d[f] && c.tripType && (a.common.isNull(c[d[f]]) || "yyyy-mm-dd" == a.Lang.trim(c[d[f]]))) return e[f]

                }
                if (!a.common.isRightFormat(b, c.depDate)) return "depDateError";
                if (1 == c.tripType && !a.common.isRightFormat(b, c.arrDate)) return "arrDateError";
                var h = g_config.currentDate || new Date;
                return a.common.getDate(c.depDate) < new Date(h.getFullYear(), h.getMonth(), h.getDate()).getTime() ? "dateIsBeforeThanToday": a.common.isOneYearLater(c.depDate) ? "depDateThanOneYear": 1 == c.tripType && a.common.isOneYearLater(c.arrDate) ? "arrDateThanOneYear": 1 == c.tripType && a.common.getDate(c.depDate) > a.common.getDate(c.arrDate) ? "arrBeforeThanDep": ""

            }

        },
        "", {
            requires: ["common"]

        });
/*! Generated by Clam: et 2014-07-11 11:06:15 */
YUI.namespace("Y.preDefined"),
    YUI.add("predefined",
        function(a) {
            a.preDefined = {
                title: "${depCityName}\u5230${arrCityName} - \u56fd\u5185\u673a\u7968 - \u6dd8\u5b9d\u65c5\u884c",
                apply: "<h6>\u4ec0\u4e48\u662f\u201c\u7533\u8bf7\u201d\uff1f</h6>\u5728\u60a8\u9009\u62e9\u7533\u8bf7\u7968\u540e\uff0c\u5356\u5bb6\u4f1a\u4e3a\u60a8\u7533\u8bf7\u5ea7\u4f4d\uff0c\u5e76\u57281\u5c0f\u65f6\u5185\u4e3b\u52a8\u548c\u60a8\u8054\u7cfb\uff0c\u901a\u77e5\u60a8\u7533\u8bf7\u6210\u529f\uff0c\u518d\u8bf7\u60a8\u8fdb\u884c\u4ed8\u6b3e\u3002",
                error: {
                    noList: '<div class="tips"><h6>\u6ca1\u6709\u627e\u5230\u60a8\u6240\u67e5\u8be2\u7684\u822a\u73ed\uff0c\u53ef\u80fd\u539f\u56e0\u5982\u4e0b\uff1a</h6><p>1.\u60a8\u6240\u67e5\u8be2\u7684\u822a\u6bb5\u5728\u6dd8\u5b9d\u65e0\u822a\u73ed\u4fe1\u606f\uff0c\u9ebb\u70e6\u60a8\u8054\u7cfb\u6dd8\u5b9d\u5ba2\u670d400-1688-688\uff0c\u534f\u52a9\u6dd8\u5b9d\u8865\u9f50\u822a\u73ed\u4fe1\u606f</p><p>2.\u56e0\u4e3a\u7f51\u7edc\u7e41\u5fd9\u539f\u56e0</p></div>',
                    timeout: '<div class="tips">\u5bf9\u4e0d\u8d77\uff0c\u76ee\u524d\u7cfb\u7edf\u8bbf\u95ee\u4eba\u6570\u8f83\u591a\u9020\u6210\u7cfb\u7edf\u7e41\u5fd9\uff0c\u8bf7\u60a8\u7a0d\u540e\u518d\u8bd5!</div>',
                    noDepCityName: '<div class="tips">\u8bf7\u586b\u5199\u51fa\u53d1\u57ce\u5e02\uff01</div>',
                    noArrCityName: '<div class="tips">\u8bf7\u586b\u5199\u5230\u8fbe\u57ce\u5e02\uff01</div>',
                    depCityNameError: '<div class="tips">\u51fa\u53d1\u57ce\u5e02\u6709\u8bef\uff0c\u8bf7\u91cd\u65b0\u586b\u5199\uff01</div>',
                    arrCityNameError: '<div class="tips">\u5230\u8fbe\u57ce\u5e02\u6709\u8bef\uff0c\u8bf7\u91cd\u65b0\u586b\u5199\uff01</div>',
                    noDepDate: '<div class="tips">\u51fa\u53d1\u65e5\u671f\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\uff01</div>',
                    noArrDate: '<div class="tips">\u8fd4\u7a0b\u65e5\u671f\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\uff01</div>',
                    depDateError: '<div class="tips">\u51fa\u53d1\u65e5\u671f\u683c\u5f0f\u6709\u8bef\uff0c\u8bf7\u4f7f\u7528YYYY-MM-DD\u683c\u5f0f\u586b\u5199\u6216\u91cd\u65b0\u9009\u62e9\uff01</div>',
                    arrDateError: '<div class="tips">\u8fd4\u7a0b\u65e5\u671f\u683c\u5f0f\u6709\u8bef\uff0c\u8bf7\u4f7f\u7528YYYY-MM-DD\u683c\u5f0f\u586b\u5199\u6216\u91cd\u65b0\u9009\u62e9\uff01</div>',
                    dateIsBeforeThanToday: '<div class="tips">\u60a8\u597d\uff0c\u65e9\u4e8e\u4eca\u5929\u8d77\u98de\u7684\u822a\u73ed\u5df2\u4e0d\u53ef\u9500\u552e\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u51fa\u53d1\u65e5\u671f\uff01</div>',
                    arrBeforeThanDep: '<div class="tips">\u975e\u5e38\u62b1\u6b49\uff0c\u8fd4\u7a0b\u65e5\u671f\u4e0d\u80fd\u65e9\u4e8e\u51fa\u53d1\u65e5\u671f\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u8fd4\u7a0b\u65e5\u671f\uff01</div>',
                    depDateThanOneYear: '<div class="tips">\u975e\u5e38\u62b1\u6b49\uff0c\u60a8\u53ea\u80fd\u67e5\u8be2\u4e00\u5e74\u4ee5\u5185\u7684\u822a\u73ed\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u51fa\u53d1\u65e5\u671f\uff01</div>',
                    arrDateThanOneYear: '<div class="tips">\u975e\u5e38\u62b1\u6b49\uff0c\u60a8\u53ea\u80fd\u67e5\u8be2\u4e00\u5e74\u4ee5\u5185\u7684\u822a\u73ed\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u8fd4\u7a0b\u65e5\u671f\uff01</div>',
                    depCityAndArrCityTheSame: '<div class="tips">\u60a8\u8f93\u5165\u7684\u51fa\u53d1\u57ce\u5e02\u548c\u5230\u8fbe\u57ce\u5e02\u76f8\u540c\uff0c\u8bf7\u786e\u8ba4\u540e\u91cd\u65b0\u8f93\u5165\uff01</div>',
                    cabinSellOut: '<div class="tips-s">\u60a8\u7b5b\u9009\u673a\u7968\u5df2\u552e\u5b8c\uff0c\u8bf7\u4fee\u6539\u7b5b\u9009\u6761\u4ef6\u6216\u9009\u62e9\u5176\u4ed6\u822a\u73ed\u3002</div>',
                    agentSellOut: '<div class="tips-s">\u6b64\u822a\u73ed\u5df2\u552e\u5b8c\uff0c\u8bf7\u9009\u62e9\u5176\u4ed6\u822a\u73ed\u3002</div>',
                    gaoduanSellOut: '<div class="tips-s">\u6b64\u822a\u73ed\u6240\u6709\u5546\u52a1\u5934\u7b49\u8231\u673a\u7968\u5df2\u552e\u5b8c\u3002</div>',
                    agentError: '<div class="tips-s">\u83b7\u53d6\u5356\u5bb6\u5217\u8868\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002</div>',
                    scoreError: '<div class="tips">\u5356\u5bb6\u6253\u5206\u83b7\u53d6\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002</div>',
                    commentFail: '<div class="tips">\u5f88\u62b1\u6b49\uff0c\u7531\u4e8e\u7cfb\u7edf\u7e41\u5fd9\uff0c\u8bc4\u4ef7\u5185\u5bb9\u6682\u65f6\u65e0\u6cd5\u5c55\u73b0\u3002</div>',
                    filterNoResult: '<div class="tips">\u5f88\u62b1\u6b49\uff0c\u6ca1\u6709\u67e5\u8be2\u5230\u6ee1\u8db3\u60a8\u7b5b\u9009\u6761\u4ef6\u7684\u822a\u73ed\uff0c\u8bf7\u60a8\u66f4\u6362\u5176\u4ed6\u7b5b\u9009\u6761\u4ef6\u6216\u8005\u53d6\u6d88\u7b5b\u9009\u6761\u4ef6\u91cd\u65b0\u67e5\u8be2</div>',
                    filterSupplyNoResult: '<div class="tips">\u6b64\u822a\u73ed\u4e0b\u6ca1\u6709\u7b26\u5408\u7b5b\u9009\u6761\u4ef6\u7684\u673a\u7968\uff0c\u8bf7\u53d6\u6d88\u6216\u4fee\u6539\u7b5b\u9009\u6761\u4ef6\u540e\u91cd\u65b0\u67e5\u8be2</div>',
                    xuanpinNotFind: '<div class="tips">\u4eb2\uff0c\u5927\u4fc3\u62a2\u8d2d\u592a\u706b\u7206\uff0c\u5f53\u524d\u65e5\u671f612\u4e13\u4f9b\u7968\u521a\u552e\u7f44\uff0c\u60a8\u8fd8\u53ef\u8d2d\u4e70\u513f\u7ae5\u7279\u60e0\u7968\uff0c\u6216\u5176\u4ed6\u65e5\u671f\u7684\u7279\u4ef7\u673a\u7968\u54e6\uff0c\u8bd5\u8bd5 <a href="' + location.href.split("xuanpinOnly=true").join("") + '">\u641c\u7d22\u5176\u4ed6\u673a\u7968</a>'

                },
                loading: {
                    trip: "\u6b63\u5728\u4e3a\u60a8\u52a0\u8f7d <b>\u6240\u6709\u822a\u73ed\u4fe1\u606f</b>...",
                    qijianTrip: "\u6b63\u5728\u4e3a\u60a8\u52a0\u8f7d <b>\u822a\u7a7a\u516c\u53f8\u65d7\u8230\u5e97\u822a\u73ed</b>...",
                    autoTrip: "\u6b63\u5728\u4e3a\u60a8\u52a0\u8f7d <b>\u652f\u6301\u81ea\u52a8\u51fa\u7968\u7684\u822a\u73ed</b>...",
                    cabinClassTrip: "\u6b63\u5728\u4e3a\u60a8\u7b5b\u9009\u6240\u9009\u8231\u4f4d <b>\u822a\u73ed\u4fe1\u606f</b>...",
                    getLowprice: "\u6b63\u5728\u52a0\u8f7d\u6700\u4f4e\u4ef7\u4ee3\u7406\u5546\u4fe1\u606f...",
                    getGaoduan: "\u6b63\u5728\u52a0\u8f7d\u9ad8\u7aef\u5927\u6c14\u4e0a\u6863\u6b21\u4ee3\u7406\u5546\u4fe1\u606f..."

                },
                timeout: {
                    weekTrip: 1e4,
                    direct: 2e4,
                    back: 2e4,
                    moreSupply: 2e4,
                    moreDiscount: 2e4,
                    flight: 1e4,
                    rules: 1e4,
                    score: 2e4

                },
                sortNum: 5,
                uri: {
                    bmp: "search/corporation_ticket_tips.htm?callback={callback}",
                    weekTrip: "search/common_cheapest_calendar.htm",
                    direct: "searchow/search.htm?type=${type}&{@if isBack}depCity=${arrCity}&depCityName=${arrCityName}&arrCity=${depCity}&arrCityName=${depCityName}&depDate=${arrDate}{@/if}{@if !isBack}depCity=${depCity}&depCityName=${depCityName}&arrCity=${arrCity}&arrCityName=${arrCityName}&depDate=${depDate}{@/if}&tripType=${tripType}&agentIds=${agentId}&supplyItinerary=${supplyItinerary}&autoBook=${autoBook}&cabinClass=${cabinClass}&searchSource=${searchSource}&searchBy=${searchBy}&passengerNum=${passengerNum}{@if activityName}&xuanpinOnly=${xuanpinOnly}{@/if}&callback={callback}",
                    flight: "nsearch/flightType.htm?flightType=${flightType}&callback={callback}",
                    rules: "nsearch/tuigaiqian.htm?depCity=${depCity}&arrCity=${arrCity}&date=${depDate}&callback={callback}",
                    stop: "nsearch/stop_info.htm?{@if searchInfo}depDate=${searchInfo.depDate}{@/if}&{@if flightInfo}depAirport=${flightInfo.depAirport}&arrAirport=${flightInfo.arrAirport}&flightNO=${flightInfo.flightNo}{@/if}&callback={callback}",
                    isLogin: "nsearch/isLogin.htm?callback={callback}",
                    getCheap: "search/roundtripSpecialSearch.htm?depCity=${depCity}&depCityName=${depCityName}&arrCity=${arrCity}&arrCityName=${arrCityName}&retDate=${arrDate}&depDate=${depDate}&tripType=1&agentIds=&qijian=&autoBook=&cabinClass=&source=1",
                    fastBuyEtao: 'trip_open_order.htm?tripType=0&depCity=${depCity}&arrCity=${arrCity}&isBuss=${isBuss}&agentId=${agentId}&segment=[{\\"segmentNumber\\":\\"00\\",\\"flightNO\\":\\"${flightNo}\\",\\"depDate\\":\\"${depDate}\\",\\"depCity\\":\\"${depCity}\\",\\"arrCity\\":\\"${arrCity}\\",\\"invoiceType\\":${invoiceType},\\"cabin\\":\\"${cabin}\\",\\"stockType\\":${stockType}}]&searchBy=${searchBy}&searchSource=${searchSource}&scene=${scene}&price=${price}&activityId=${activityId}&cheapToken=${cheapToken}&isInsPromotion=${isInsPromotion}',
                    fastBuy: 'trip_open_order.htm?tripType=0&depCity=${depCity}&arrCity=${arrCity}&isBuss=${isBuss}&agentId=${agentId}&segment=[{"segmentNumber":"00","flightNO":"${flightNo}","depDate":"${depDate}","depCity":"${depCity}","arrCity":"${arrCity}","invoiceType":${invoiceType},"cabin":"${cabin}","stockType":${stockType}}]&searchBy=${searchBy}&searchSource=${searchSource}&scene=${scene}&price=${price}&activityId=${activityId}&cheapToken=${cheapToken}&isInsPromotion=${isInsPromotion}',
                    score: "nsearch/agentScoreInfo.htm?agentId=${agentId}&sp={@if isApply}1{@/if}&callback={callback}",
                    nearBy: "search/nearby.htm?{@if isBack}depCity=${arrCity}&depCityName=${arrCityName}&arrCity=${depCity}&arrCityName=${depCityName}&depDate=${arrDate}{@/if}{@if !isBack}depCity=${depCity}&depCityName=${depCityName}&arrCity=${arrCity}&arrCityName=${arrCityName}&depDate=${depDate}{@/if}&tripType=0&agentIds=${agentId}&lowest=${lowest}&callback={callback}"

                },
                linkUrl: {
                    weekRequest: "?tripType=0&searchBy=&depCity=%depCity%&depCityName=%depCityName%&arrCity=%arrCity%&arrCityName=%arrCityName%&depDate=${depDate}&arrDate=${arrDate}",
                    shopWeekRequest: "http://%serverName%/flightSearch.htm?tripCategory=0&_fmh.fl._0.t=0&_fmh.fl._0.st=%_fmh.fl._0.st%&_fmh.fl._0.en=%_fmh.fl._0.en%&_fmh.fl._0.sta=${depDate}&_fmh.fl._0.s=%_fmh.fl._0.s%&_fmh.fl._0.e=%_fmh.fl._0.e%",
                    searchOneWayWeekRequest: "http://s.taobao.com/search?q=${searchInfo.enCodeDepCityName}+${searchInfo.enCodeArrCityName}+%E6%9C%BA%E7%A5%A8&s=0&sc_inner=jp_et=tbsearch|%_fmh.fl._0.s%|%_fmh.fl._0.e%|${depDate}|&tripType=0&sc_trace=tbtravel_1",
                    searchOneWayWeekRequestBack: "http://s.taobao.com/search?q=${searchInfo.enCodeDepCityName}+${searchInfo.enCodeArrCityName}+%E6%9C%BA%E7%A5%A8&s=0&sc_inner=jp_et=tbsearch|%_fmh.fl._0.e%|%_fmh.fl._0.s%|${depDate}|&tripType=0&sc_trace=tbtravel_1",
                    etaoWeekRequest: "http://s.etao.com/search?tripType=0&depCityName=%depCityName%&depDate=${depDate}&arrCityName=%arrCityName%&arrDate=yyyy-mm-dd&searchBy=etao&jp_et=tbsearch|%depCityName%|%arrCityName%|${depDate}&q=%depCityName%+%arrCityName%+%BB%FA%C6%B1",
                    so360WeekRequest: "http://s.jipiao.trip.daily.taobao.net/flight_search_so_360.htm?type=1&tc=%tc%&qc=%qc&t=%t%&q=%q%&date=${depDate}",
                    form: "?tripType=${tripType}&depCity=${depCity}&depCityName=${enCodeDepCityName}&arrCity=${arrCity}&arrCityName=${enCodeArrCityName}&depDate=${depDate}&arrDate=${arrDate}&{@if isBack}isBack=1{@/if}&searchBy=${searchBy}"

                },
                outLink: {
                    nearCity: "?tripType=0&searchBy=&depCity=${depCityCode}&depCityName=${enCodeDepCityName}&arrCity=${arrCityCode}&arrCityName=${enCodeArrCityName}&depDate=${depDate}"

                },
                feedBack: "http://ur.taobao.com/survey/view.htm?id=1208",
                flash: {
                    url: "http://img01.taobaocdn.com/tps/i1/T1gw5uXgJVXXXXXXXX.swf?depCity=${enCodeDepCityName}&arrCity=${enCodeArrCityName}",
                    flashParams: {
                        menu: "false",
                        scale: "noScale",
                        allowFullscreen: "true",
                        allowScriptAccess: "always",
                        bgcolor: "",
                        wmode: "transparent"

                    },
                    id: "J_chart",
                    width: "750",
                    height: "350",
                    flashV: "10.0.0",
                    content: "J_chart",
                    flashUrl: "http://img02.taobaocdn.com/tps/i2/T1439MXbFkXXXXXXXX.swf"

                },
                nearCityPrice: 4e3

            },
                window.getDateRecord = {
                    tripNum: 0,
                    ruleNum: 0,
                    disCount: 0,
                    moreSupply: 0,
                    shopNum: 0

                }

        });
/*! Generated by Clam: et 2014-07-11 11:06:15 */
YUI.namespace("Y.reptile"),
    YUI.add("reptile",
        function(a) {
            var b = null;
            a.reptile = function(d, e, f, g) {
                a.one(".J_reptile") || (b = new c(d)),
                    b.resetData(d, e, f, g)

            };
            var c = function(b) {
                var c = this,
                    d = '<div class="mask J_reptitleMash"></div><div class="reptile J_reptile"><p>\u9ad8\u5cf0\u65f6\u6bb5\uff0c\u8d44\u6e90\u6709\u9650\uff0c\u9ebb\u70e6\u60a8\u8f93\u5165\u9a8c\u8bc1\u7801\uff1a </p><p><input type="text" class="J_code" /> <img class="J_changeImg" src="' + b.checkcodeURL + '" /><span class="change-img J_changeImg">\u6362\u4e00\u5f20</span></p><p class="error hidden J_error">\u9a8c\u8bc1\u7801\u8f93\u5165\u6709\u8bef\uff0c\u8bf7\u91cd\u8bd5</p><input type="button" value="\u63d0\u4ea4" class="submit J_checkCode" /></div>';
                a.one("body").append(d),
                    c.reptitleWin = a.one(".J_reptile"),
                    c.reptitleMask = a.one(".J_reptitleMash"),
                    c.error = a.one(".J_error"),
                    c.code = a.one(".J_code"),
                    6 == a.UA.ie && c.reptitleMask.appendChild("<iframe frameborder='0' width='100%'></iframe>"),
                    c.bindEvent()

            };
            c.prototype = {
                bindEvent: function() {
                    var b = this;
                    b.checkCode = b.reptitleWin.one(".J_checkCode"),
                        b.changeCode = b.reptitleWin.all(".J_changeImg"),
                        b.img = b.reptitleWin.one("img"),
                        b.changeCode.on("click",
                            function() {
                                b.setSrc()

                            }),
                        b.checkCode.on("click",
                            function() {
                                var c = b.data.queryURL.replace(/&amp;/g, "&") + "&callback={callback}&code=" + b.code.get("value");
                                b.flag++,
                                    a.Node.getDOMNode(b.checkCode).disabled = !0,
                                    a.jsonp(c, {
                                        on: {
                                            success: function(c, d) {
                                                var e = c;
                                                return 0 == e.error ? (b.hide(), void b.dealData(e.data, d)) : 200 == e.error ? void a.reptile(e.data, b.dealData, b.failMethod, d) : (b.hide(), void(b.failMethod && b.failMethod(e, d)))

                                            },
                                            failure: function() {
                                                b.hide(),
                                                    b.failMethod && b.failMethod()

                                            }

                                        },
                                        timeout: "",
                                        args: [b.recoredNum || ""]

                                    })

                            }),
                        b.code.on("focus",
                            function() {
                                b.error.addClass("hidden")

                            }),
                        6 == a.UA.ie && a.one("window").on("scroll",
                            function() {
                                b.reptitleWin.setStyle("top", a.DOM.docScrollY() + a.DOM.winHeight() / 3)

                            })

                },
                setSrc: function() {
                    var a = this;
                    a.img.set("src", a.data.checkcodeURL + "&n" + (new Date).getTime())

                },
                resetData: function(b, c, d, e) {
                    var f = this;
                    f.data = b,
                        f.dealData = c,
                        f.failMethod = d,
                        f.recoredNum = e,
                        f.flag && (f.setSrc(), f.error.removeClass("hidden")),
                        f.flag = 0,
                        a.Node.getDOMNode(f.checkCode).disabled = !1,
                        f.show()

                },
                show: function() {
                    var b = this;
                    b.code.set("value", ""),
                        window.nowNodeTop && b.reptitleWin.setStyle("top", window.nowNodeTop),
                        6 == a.UA.ie && b.reptitleWin.setStyle("top", a.DOM.docScrollY() + a.DOM.winHeight() / 3),
                        b.reptitleMask.setStyle("height", a.DOM.docHeight()),
                        b.reptitleMask.one("iframe") && b.reptitleMask.one("iframe").setStyle("height", a.DOM.docHeight()),
                        b.reptitleWin.removeClass("hidden"),
                        b.reptitleMask.removeClass("hidden")

                },
                hide: function() {
                    var a = this;
                    a.flag = 0,
                        a.setSrc(),
                        a.reptitleWin.addClass("hidden"),
                        a.reptitleMask.addClass("hidden"),
                        a.error.addClass("hidden")

                }

            }

        },
        "", {
            requires: ["node", "event-delegate", "get-jsonp", "juicer", "reptile-css"]

        });
/*! Generated by Clam: et 2014-07-11 11:06:15 */
YUI.namespace("Y.base-cabin"),
    YUI.add("base-cabin",
        function(a) {
            var b = ["\u5934\u7b49\u8231", "\u5546\u52a1\u8231", "\u7ecf\u6d4e\u8231"],
                c = ["\u5356\u5bb6\u63d0\u4f9b\u7b49\u989d\u884c\u7a0b\u5355", "\u5356\u5bb6\u4e0d\u63d0\u4f9b\u884c\u7a0b\u5355\u548c\u53d1\u7968", "\u5356\u5bb6\u63d0\u4f9b\u7b49\u989d\u884c\u7a0b\u5355", "\u5356\u5bb6\u4e0d\u63d0\u4f9b\u884c\u7a0b\u5355\u548c\u53d1\u7968", "\u5356\u5bb6\u63d0\u4f9b\u90e8\u5206\u989d\u5ea6\u884c\u7a0b\u5355\uff0c\u5dee\u989d\u90e8\u5206\u5f00\u5177\u65c5\u884c\u53d1\u7968", "\u5356\u5bb6\u4ec5\u63d0\u4f9b\u8d2d\u4e70\u989d\u5ea6\u76f8\u540c\u7684\u65c5\u884c\u53d1\u7968\uff0c\u4e0d\u63d0\u4f9b\u884c\u7a0b\u5355"],
                d = function(a) {
                    return a > 10 ? "": 10 == a ? "\u5168\u4ef7": a.toFixed(1) + "\u6298"

                };
            a.baseCabin = function(e) {
                var f = this;
                if (a.mix(f, e), f.finalInfo = f.cpInsureInfo || f.cpinfo, f.isCabinLess = "A" == f.cabinNum || null == f.cabinNum || f.cabinNum > 9 ? !1: !0, f.isShowDis = 2 == f.cabinClass ? !0: !1, f.cabinClassName = b[f.cabinClass], f.oneAgentMark = f.agentId.toString() + (f.activityId ? f.activePrice: f.price), f.isApply = 3 == f.priceType, f.supplyBill = 2 == f.itineraryPriceType || 4 == f.itineraryPriceType ? !1: !0, f.billInfo = c[f.itineraryPriceType - 1], f.tui = "\u9000\u6539\u7b7e", f.originDiscount = f.discount, f.discount = d(f.discount / 10), f.activityId ? (f.activePrice = f.price - f.bonus, f.activeDiscount = d(f.actDiscount / 10), f.finalPrice = f.activePrice || f.price, f.finalDiscount = f.activeDiscount || f.discount) : (f.finalPrice = f.price, f.finalDiscount = f.discount, f.bonus = 0), f.insurePrice) {
                    if (f.activityId && f.bonus) {
                        var g = f.insurePrice - f.bonus;
                        f.activeInsurePrice = g > 0 ? g: f.insurePrice,
                            f.insureActiveDiscount = d(f.bestDiscount / 10)

                    }
                    f.insureDiscount = d(f.insureDiscount / 10),
                        f.activityId ? (f.finalInsurePrice = f.activeInsurePrice || f.insurePrice, f.finalInsureDiscount = f.insureActiveDiscount || f.insureDiscount) : (f.finalInsurePrice = f.insurePrice, f.finalInsureDiscount = f.insureDiscount)

                } else f.insureDiscount = "";
                f.originalPrice = f.insurePrice || f.price,
                    f.originalDiscount = f.insureDiscount || f.discount,
                    f.allFinalPrice = f.finalInsurePrice || f.finalPrice,
                    f.allFinalDiscount = f.finalInsureDiscount || f.finalDiscount

            }

        },
        "", {
            requires: ["common"]

        });
/*! Generated by Clam: et 2014-07-11 11:06:15 */
YUI.namespace("Y.oneAgent"),
    YUI.add("cabin",
        function(a) {
            a.oneCabin = function(b, c, d, e, f) {
                var g = this;
                a.listing && a.listing.searchInfo.tripType && (g.activityId = ""),
                    a.baseCabin.call(g, b),
                    c && (g.nickName = c[g.agentId].nick, g.ww = c[g.agentId].ww, g.isQiJian = c[g.agentId].qijian, g.directGov = c[g.agentId].directGov, g.quickReturn = c[g.agentId].quickReturn),
                    d && (g.comment = d[g.agentId], g.comment ? g.comment.score = parseFloat(g.comment.score).toFixed(1) : g.comment = {
                        score: "0.0",
                        feed: 0

                    }),
                    f && (g.baseInsurePrice = f.insurePrice, g.freePrice = g.forceInsure ? f.insure9cPrice: f.insureAdultPrice),
                    g.activityId && e[g.activityId] && (g.activityDesc = e[g.activityId].activityDesc || "", g.activeIcon = e[g.activityId].actIcon || "")

            }

        },
        "", {
            requires: ["common"]

        });
/*! Generated by Clam: et 2014-07-11 11:06:15 */
YUI.namespace("Y.flightItem"),
    YUI.add("flight-item",
        function(a) {
            var b = 864e5,
                c = 36e5,
                d = [{
                    bTime: "00:00",
                    eTime: "11:00"

                },
                    {
                        bTime: "11:00",
                        eTime: "14:00"

                    },
                    {
                        bTime: "14:00",
                        eTime: "18:00"

                    },
                    {
                        bTime: "18:00",
                        eTime: "24:00"

                    }],
                e = ["lowprice", "gaoduan"],
                f = ["tbjipiao.29.", "tbjipiao.30.", "tbjipiao.31."],
                g = ["tbjipiao.32.", "tbjipiao.33.", "tbjipiao.34."],
                h = ["tbjipiao.33.1", "tbjipiao.33.2"];
            a.flightItem = function(d, e) {
                var f = this;
                f.id = d.id,
                    f.index = e,
                    f.flightType = d.flightType,
                    f.oilPrice = d.oilPrice,
                    f.buildPrice = d.buildPrice,
                    f.totalPrice = d.oilPrice + d.buildPrice,
                    f.depDate = d.depTime,
                    f.depTime = f.getTime(d.depTime).time,
                    f.time = f.getTimeArea(),
                    f.depDay = f.getTime(d.depTime).day,
                    f.arrDate = d.arrTime,
                    f.arrTime = f.getTime(d.arrTime).time,
                    f.arrDay = f.getTime(d.arrTime).day,
                    f.special = d.special,
                    f.disDay = (a.common.getDate(f.getTime(d.depTime).day) - a.common.getDate(f.getTime(d.arrTime).day)) / b,
                    f.airlineCode = d.airlineCode,
                    f.depAirport = d.depAirport,
                    f.arrAirport = d.arrAirport,
                    f.depTerm = "--" == d.depTerm ? "": d.depTerm,
                    f.arrTerm = "--" == d.arrTerm ? "": d.arrTerm,
                    f.flightNo = d.flightNo,
                    f.carrier = d.carrier,
                    f.carrierAirlineCode = d.carrierAirlineCode,
                    f.carrierName = d.carrierAirlineName,
                    f.hasActivity = d.hasActivity,
                    f.stop = d.stop,
                    f.isShop = !!a.listing.searchInfo.agentId,
                    f.isRoundAndDep = a.listing.searchInfo.tripType && !a.listing.searchInfo.isBack,
                    f.stopCity = d.stopCity ? d.stopCity: "-",
                    f.stopArrTime = d.stopArrTime ? d.stopArrTime: "-",
                    f.stopDepTime = d.stopDepTime ? d.stopDepTime: "-",
                    f.hasActivity = d.hasActivity && !a.listing.searchInfo.tripType;
                var g = a.common.setDateStrToDate(d.depTime);
                g.setHours(f.depTime.split(":")[0], f.depTime.split(":")[1]);
                var h = g_config.currentDate || new Date;
                f.isReserve = (g.getTime() - h.getTime()) / c > 2,
                    f.isNextDay = a.common.setDateStrToDate(f.arrDay).getTime() - a.common.setDateStrToDate(f.depDay).getTime() >= b

            },
                a.flightItem.prototype = {
                    setAirportInfo: function(a) {
                        var b = this;
                        b.depAirPortName = b.getMapInfo(a, b.depAirport),
                            b.arrAirPortName = b.getMapInfo(a, b.arrAirport)

                    },
                    setAirLineInfo: function(a) {
                        var b = this;
                        b.airLineName = b.getMapInfo(a, b.airlineCode),
                            b.isShop && (b.cabin.airlineCode = b.airlineCode, b.cabin.airLineName = b.airLineName)

                    },
                    setTicketInfo: function(a) {
                        var b = this;
                        a && (b.outTicketNum = b.getMapInfo(a, b.flightNo))

                    },
                    getFlightName: function(a) {
                        var b = this;
                        b.flightTypeName = a[b.flightType] || "\u5176\u4ed6\u673a\u578b"

                    },
                    getCabin: function(b, c, d) {
                        var e = this;
                        e.cabin = new a.oneCabin(b, null, null, c, d)

                    },
                    getMapInfo: function(a, b) {
                        return a[b] || ""

                    },
                    getHtml: function() {
                        var b = this;
                        return b.html = a.juicer(a.pageTpl.oneItem, b),
                            b.html

                    },
                    getSupply: function(b, c, d, f) {
                        var g = this;
                        return g[e[c]] ? (c ? g[e[c]].sort(function(a, b) {
                            return a.id - b.id

                        }) : g[e[c]] = g._sortByPrice(g[e[c]], 1), void f(g[e[c]])) : (b += "&flightNo=" + g.flightNo + "&ua=" + encodeURIComponent(uadata), a.getJSONP(b,
                            function(a) {
                                g._dealSupplyList(a, c),
                                    f(g[e[c]])

                            },
                            function() {
                                g._failSupplyList(c)

                            },
                            d), void a.common.reloadUa())

                    },
                    _dealSupplyList: function(b, c) {
                        var d = this,
                            i = b.cabin.length;
                        if (i) {
                            for (var j = [], k = 0; i > k; k++) {
                                var l = new a.oneCabin(b.cabin[k], b.agentMap, b.rateMap, b.trippActivityMap, b.insurePromotionInfo);
                                l.id = k,
                                    l.isQiJian ? (l.goldId = h[0], l.insureId = h[1], 0 == k && 0 == c && (l.stickt = !0)) : (l.goldId = f[c] + k, l.insureId = g[c] + k),
                                    l.isReserve = d.isReserve,
                                    l.isShop = d.isShop,
                                    l.isRoundAndDep = d.isRoundAndDep,
                                    l.airlineCode = d.airlineCode,
                                    l.airLineName = d.airLineName,
                                    j.push(l)

                            }
                            d[e[c]] = c ? j: d._sortByPrice(j, 1)

                        }

                    },
                    _failSupplyList: function(b) {
                        return "1" == b ? void this.agentListBox.setContent("true" === a.listing.searchInfo.xuanpinOnly ? a.preDefined.error.filterSupplyNoResult: a.preDefined.error.gaoduanSellOut) : void this.agentListBox.setContent(a.preDefined.error.agentError)

                    },
                    dealAgentItem: function(b) {
                        var c = [];
                        return a.each(b,
                            function(b) {
                                c.push(a.juicer(a.pageTpl.supplyItem, b))

                            }),
                            '<div class="J_supplyList">' + c.join("") + "</div>"

                    },
                    sortByPrice: function(a, b, c, d) {
                        var f = this;
                        if (b = b ? b: f[e[a]].length, d) {
                            var g = f._sortByPrice(f.getAgentByIndex(a, 0, b), 1),
                                h = f._sortByPrice(f.getAgentByIndex(a, b), 1),
                                i = f.getFaster(g, h);
                            g = i.topNAgent,
                                h = i.otherAgent

                        } else var g = f._sortByPrice(f.getAgentByIndex(a, 0, b), c),
                            h = f._sortByPrice(f.getAgentByIndex(a, b), c);
                        return f[e[a]] = f._sortByPrice(g, c).concat(f._sortByPrice(h, 1)),
                            f._sortByPrice(g, c)

                    },
                    _sortByPrice: function(b, c) {
                        var d = [],
                            e = a.clone(b);
                        return a.each(b,
                            function(a, b) {
                                a.stickt && (d.push(a), e.splice(b, 1) || [])

                            }),
                            e.sort(function(a, b) {
                                var d = a.allFinalPrice - b.allFinalPrice;
                                return 0 == d && a.comment && b.comment ? a.comment.score == b.comment.score ? -(a.comment.sort - b.comment.sort) : -(a.comment.score - b.comment.score) : c * d

                            }),
                            d.concat(e)

                    },
                    sortByService: function(a, b, c, d) {
                        var f = this;
                        if (b = b ? b: f[e[a]].length, d) {
                            var g = f._sortByPrice(f.getAgentByIndex(a, 0, b), 1),
                                h = f._sortByPrice(f.getAgentByIndex(a, b), 1);
                            g = f._sortByService(g, c);
                            var i = f.getFaster(g, h);
                            return g = i.topNAgent,
                                h = i.otherAgent,
                                f[e[a]] = g.concat(h),
                                g

                        }
                        var g = f._sortByService(f.getAgentByIndex(a, 0, b), c),
                            h = f._sortByService(f.getAgentByIndex(a, b), c);
                        return f[e[a]] = f._sortByService(g, c).concat(f._sortByPrice(h, 1)),
                            f._sortByService(g, c)

                    },
                    _sortByService: function(b, c) {
                        var d = [],
                            e = a.clone(b);
                        return a.each(b,
                            function(a, b) {
                                a.stickt && (d.push(a), e.splice(b, 1) || [])

                            }),
                            e.sort(function(a, b) {
                                var d = a.comment.score - b.comment.score;
                                return 0 == d ? a.allFinalPrice - b.allFinalPrice: c * d

                            }),
                            d.concat(e)

                    },
                    getFaster: function(a, b) {
                        if (a.length < 5) return {
                            topNAgent: a,
                            otherAgent: b

                        };
                        var c,
                            d = a.concat(b),
                            e = 0,
                            f = 0;
                        a[0].isQiJian && ++f;
                        for (var g = f; g < d.length && !(e >= 2); ++g) if (f + 5 > g && d[g].speedIssueTicket && ++e, g >= f + 3 && !d[g].speedIssueTicket && !c && (c = g), g > f + 3 && d[g].speedIssueTicket && c) {
                            if (g > c && (d.splice(c, 0, d.splice(g, 1)[0]), g >= f + 5)) break; ++c

                        }
                        return {
                            topNAgent: d.slice(0, f + 5),
                            otherAgent: d.slice(f + 5)

                        }

                    },
                    getAgentByIndex: function(a, b, c) {
                        var d = this,
                            f = d[e[a]],
                            g = f.length;
                        if (0 > b) return f;
                        for (var h = [], i = 0, j = f.length; j > i; i++) {
                            var k = f[i];
                            if (k.stickt) {
                                0 == b && h.push(k),
                                    0 != b && b++;
                                break

                            }

                        }
                        c = c ? Math.min(g, c) : g;
                        var i = b;
                        do {
                            var k = f[i];
                            k && !k.stickt && h.push(f[i]),
                                k && k.stickt && c++,
                                i++

                        }
                        while (c > i);
                        return h

                    },
                    changeAgent: function(a) {
                        var b = this,
                            c = b.cabin.finalPrice,
                            d = b[e[a]],
                            f = d ? d.length: 0;
                        if (f > 0) {
                            for (var g = 0, h = d[0].allFinalPrice, i = 1; f > i; i++) {
                                var j = d[i].allFinalPrice;
                                h > j && (h = j, g = i)

                            }
                            if (d[g].cabinClass == b.cabin.cabinClass || 2 != d[g].cabinClass && 2 != b.cabin.cabinClass || c > h) {
                                var k = b.cabin.ticket;
                                return b.cabin = d[g],
                                    b.cabin.ticketNum = k,
                                    b.getHtml()

                            }
                            return null

                        }
                        return null

                    },
                    getAgentNum: function(b) {
                        var c = this,
                            d = c[e[b]],
                            f = 0;
                        return a.each(d,
                            function(a) {
                                a.stickt || f++

                            }),
                            f

                    },
                    getAgentById: function(a, b) {
                        for (var c = this, d = c[e[a]], f = 0, g = d.length; g > f; f++) if (d[f].id == b) return d[f]

                    },
                    getTime: function(a) {
                        var b = {};
                        return b.day = a.split(" ")[0],
                            b.time = a.split(" ")[1],
                            b

                    },
                    getTimeArea: function() {
                        for (var a = this, b = 0, c = d.length; c > b; b++) if (d[b].bTime <= a.depTime && a.depTime < d[b].eTime) return b

                    }

                }

        },
        "", {
            requires: ["node", "cabin", "juicer"]

        });
/*! Generated by Clam: et 2014-07-11 11:06:15 */
YUI.namespace("Y.flightList"),
    YUI.add("flight-list",
        function(a) {

            var b = a.one("#J_listMain").one(".inner"),
                c = !0;
            a.flightList = function(b, c, d, e) {
                debugger
                var f = this;
                    f.isFilter = e,
                    f.timeOut = c,
                    f.configError = d,
                    setTimeout(function() {
                        uadata ? (
                            f.url = b + "&ua=" + encodeURIComponent(uadata),
                            f.getFlightList()
                        ) : (
                            a.common.reloadUa(), setTimeout(function() {
                                f.url = b + "&ua=" + encodeURIComponent(uadata),
                                    f.getFlightList()

                            }, 200)
                        )
                    }, 50)

            },
                a.flightList.prototype = {
                    getFlightList: function() {
                        var b = this,
                            c = function(a, c) {
                                c == window.getDateRecord.tripNum && b.dealFlightList(a)

                            },
                            d = function(a, c) {
                                a || b.failFlightList(),
                                    c == window.getDateRecord.tripNum && b.failFlightList(a)

                            };
                        a.getJSONP(b.url, c, d, b.timeOut, ++window.getDateRecord.tripNum, null),
                            a.common.reloadUa()

                    },
                    dealFlightList: function(b) {
                        var d = this;
                        if (0 == b.flight.length) return void d.failFlightList(b);
                        c = !1;
                        var e = [];
                        d.depCityName = b.depCityName,
                            d.arrCityName = b.arrCityName,
                            d.airportMap = b.airportMap || null,
                            d.ticketStatMap = b.ticketStatMap || null,
                            d.agentMap = b.agentMap || null,
                            d.aircodeNameMap = b.aircodeNameMap || null,
                            d.flightTypeMap = d.dealFlightMap(b.flightTypeMap),
                            d.length = b.flight.length,
                            d.flightList = {},
                            d.depAirPortCode = [],
                            d.arrAirPortCode = [];
                        for (var f = 0, g = d.length; g > f; f++) {
                            var h = b.flight[f].id;
                            d.flightList[h] = new a.flightItem(b.flight[f], f),
                                d.flightList[h].setAirportInfo(d.airportMap),
                                d.flightList[h].setTicketInfo(d.ticketStatMap),
                                d.flightList[h].getFlightName(d.flightTypeMap),
                                d.flightList[h].getCabin(b.flight[f].cabin, b.trippActivityMap, b.insurePromotionInfo),
                                d.flightList[h].setAirLineInfo(d.aircodeNameMap),
                                d.getAirPortList(d.flightList[h].depAirport, d.flightList[h].depAirPortName, d.depAirPortCode),
                                d.getAirPortList(d.flightList[h].arrAirport, d.flightList[h].arrAirPortName, d.arrAirPortCode),
                                e.push(d.flightList[h].getHtml())

                        }
                        if (d.isFilter) a.loading.hide(),
                            a.listing.flightFilter.changeNotify(d.flightList),
                            a.listing.removeLoading();
                        else {
                            var i = d.depAirPortCode.length > 1 || d.arrAirPortCode.length > 1,
                                j = d.depAirPortCode.length > 1,
                                k = d.arrAirPortCode.length > 1,
                                l = "\u8d77\u62b5";
                            j && !k && (l = "\u8d77\u98de"),
                                !j && k && (l = "\u5230\u8fbe"),
                                a.listing.dealPageInfo(i, l, {
                                    airLine: d.aircodeNameMap,
                                    depAirport: d.depAirPortCode,
                                    arrAirport: d.arrAirPortCode

                                })

                        }

                    },
                    failFlightList: function(d) {
                        var e = this;
                        return a.loading.hide(),
                            a.listing.dealFail(d.errorMsg),
                            e.isFilter && a.listing.removeLoading(),
                            d && d.flight && 0 == d.flight.length ? (b.setContent(a.listing.searchInfo.activityName && "true" === a.listing.searchInfo.xuanpinOnly ? c ? a.preDefined.error.xuanpinNotFind: a.preDefined.error.filterNoResult: a.preDefined.error.noList), void(c = !1)) : d && d.errorMsg ? (b.setContent(a.listing.searchInfo.activityName && "true" === a.listing.searchInfo.xuanpinOnly ? c ? a.preDefined.error.xuanpinNotFind: a.preDefined.error.filterNoResult: "<div class='tips'>" + d.errorMsg + "</div>"), void(c = !1)) : void b.setContent(a.preDefined.error.timeout)

                    },
                    dealFlightMap: function(b) {
                        var c = {},
                            d = {
                                small: "\u5c0f\u578b\u673a",
                                middle: "\u4e2d\u578b\u673a",
                                large: "\u5927\u578b\u673a"

                            };
                        return a.each(b,
                            function(b, e) {
                                a.each(b,
                                    function(a) {
                                        c[a] = d[e]

                                    })

                            }),
                            c

                    },
                    getAirPortList: function(a, b, c) {
                        for (var d = c.length, e = 0; d > e; e++) if (c[e].code == a) return;
                        c.push({
                            code: a,
                            name: b.substring(0, 2)

                        })

                    },
                    clearOtherInfo: function() {
                        var b = this;
                        a.each(b.flightList,
                            function(a) {
                                a.moreSupply = null,
                                    a.moreDiscount = null

                            })

                    },
                    setHtml: function(c) {
                        var d = [],
                            e = this;
                        a.each(c,
                            function(a) {
                                a && d.push(e.flightList[a.id].html)

                            }),
                            e.clearOtherInfo(),
                            setTimeout(function() {
                                    b.set("innerHTML", d.join(""))

                                },
                                0)

                    }

                }

        },
        "", {
            requires: ["node", "event-delegate", "get-jsonp", "juicer", "flight-item"]

        });
/*! Generated by Clam: et 2014-07-11 11:06:15 */
YUI.namespace("Y.RecordClick"),
    YUI.add("record-click",
        function(a) {
            var b = [{
                node: ".J_sepcialRule",
                src: "http://gm.mmstat.com/tbtrip.1.6.1.1.4?logtype=2&gokey=&cache="

            },
                {
                    node: ".J_sepcialCabin",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.3?logtype=2&gokey=&cache="

                },
                {
                    node: ".header-logo-jipiao",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.2?logtype=2&gokey=&cache="

                },
                {
                    node: ".header-logo-link",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.1?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_back",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.9?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_prePage",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.10?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_nextPage",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.11?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_Comment",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.14?logtype=2&gokey=&cache=",
                    eventHandle: "mouseover"

                },
                {
                    node: ".J_Score",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.15?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_chooseRadio",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.17?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_discount",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.16?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_rule",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.18?logtype=2&gokey=&cache=",
                    eventHandle: "mouseover"

                },
                {
                    node: ".J_reserve",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.19?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_choose",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.20?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_price",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.21?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_Time",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.22?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_PlaneType",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.23?logtype=2&gokey=&cache=",
                    eventHandle: "mouseover"

                },
                {
                    node: ".J_cabin1",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.24?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_cabin2",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.25?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_cabin3",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.26?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_AirLine a",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.27?logtype=2&gokey=&cache=",
                    eventHandle: "mouseover"

                },
                {
                    node: ".J_AirLineList input",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.28?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_bill",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.7?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_time1",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.29?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_time2",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.30?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_time3",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.32?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_time4",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.31?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_monthLink",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.37?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_preview",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.35?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_next",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.34?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_monthTab li",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.36?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_monthBody a",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.33?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_preWeek",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.38?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_nextWeek",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.39?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_slideContent a",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.40?logtype=2&gokey=&cache="

                },
                {
                    node: "#J_chart",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.6?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_lowest",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.7?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_nearList a",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.8?logtype=2&gokey=&cache="

                },
                {
                    node: ".ww-inline",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.99?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_passengerNumList label",
                    src: "http://gm.mmstat.com/tbtrip.1.6.1.1.50?logtype=2&gokey=&cache="

                },
                {
                    node: ".J_lowestPrice",
                    src: "http://gm.mmstat.com/tbtrip.1.9.80?logtype=2&gokey=&cache="

                },
                {
                    node: ".comment-score .J_agentSort",
                    src: "http://gm.mmstat.com/tbtrip.27?logtype=2&gokey=&cache="

                },
                {
                    node: ".wprice .J_agentSort",
                    src: "http://gm.mmstat.com/tbtrip.28?logtype=2&gokey=&cache="

                }];
            a.RecordClick = function(a) {
                var c = this; ! a && c.addRecordNode(b)

            },
                a.RecordClick.prototype = {
                    addRecordNode: function(b) {
                        var c = this;
                        a.each(b,
                            function(a) {
                                c.addOneRecord(a)

                            })

                    },
                    addOneRecord: function(a) {
                        var b = this; ! a.eventHandle || "change" != a.eventHandle && "domready" != a.eventHandle ? b.bubbleUpEvent(a) : b.noBubbleUpEvent(a)

                    },
                    bubbleUpEvent: function(b) {
                        var c = this;
                        a.delegate(b.eventHandle || "click",
                            function(a) {
                                var d = a.currentTarget;
                                b.show ? c.laterShow(d, b) : c.setSrc(c.getSrc(d, b.src))

                            },
                            b.content || "#content", b.node, c)

                    },
                    noBubbleUpEvent: function(b) {
                        var c = this;
                        "change" == b.eventHandle ? a.all(b.node).on(b.eventHandle,
                            function(a) {
                                var b = a.target;
                                c.setSrc(c.getSrc(b.get("options").item(b.get("selectedIndex"))))

                            }) : a.all(b.node).on(b.eventHandle,
                            function() {
                                c.setSrc(b.src)

                            })

                    },
                    laterShow: function(a, b) {
                        var c = this,
                            d = b.show.split(",");
                        setTimeout(function() {
                                var e = a.ancestor(d[0]).one(d[1]);
                                if ("block" == e.getStyle("display")) {
                                    var f = new Image;
                                    f.src = c.getSrc(a, b.src),
                                        f = null

                                }

                            },
                            10)

                    },
                    setSrc: function(a) {
                        if (a) {
                            var b = new Image;
                            b.src = a + Math.ceil(1e7 * Math.random()),
                                b = null

                        }

                    },
                    getSrc: function(a, b) {
                        return b || a.getAttribute("data-src")

                    }

                }

        },
        "", {
            requires: ["node-base", "event-delegate"]

        });
/*! Generated by Clam: et 2014-07-11 11:06:15 */
YUI.namespace("Y.SpringFestival"),
    YUI.add("spring-festival",
        function(a) {
            var b = "http://trip.taobao.com/go/rgn/trip/ne-listing-active-icon.php?callback={callback}",
                c = '<div class="spring-festival-poptip"><div class="ui-header">\u6d3b\u52a8\u7531\u6dd8\u5b9d\u65c5\u884c\u627f\u529e</div><div class="ui-content"><dl><dt>\u6d3b\u52a8\u65e5\u671f\uff1a</dt><dd>${time}</dd></dl>{@if text}<dl><dt>\u6d3b\u52a8\u89c4\u5219\uff1a</dt><dd>${text}<br/>{@if link}<a href="${link}" target="_blank">\u67e5\u770b\u8be6\u7ec6\u6d3b\u52a8\u89c4\u5219</a><br/>{@/if}<img src="http://img04.taobaocdn.com/tps/i4/T1UWISXmVcXXXi2jTq-237-80.png" /></dd></dl>{@/if}</div></div>',
                d = document.head || document.getElementsByTagName("head")[0],
                e = [".spring-festival{background-image: url(${icon})}", ".spring-festival-poptip .ui-header {font-weight: bold; margin-bottom: 10px}", ".spring-festival-poptip .ui-content dl {line-height: 20px}", ".spring-festival-poptip .ui-content dl dt {float: left;}", ".spring-festival-poptip .ui-content dl dd {padding-left: 60px;}", ".spring-festival-poptip .ui-content dl img {", "border: 1px solid #eee;", "-webkit-box-shadow: 1px 2px 5px #eee;", "-moz-box-shadow: 1px 2px 5px #eee;", "box-shadow: 1px 2px 5px #eee;", "margin-top: 10px", "}"].join(""),
                f = "a.spring-festival{display:none}";
            a.SpringFestival = function() {
                var d = this;
                a.jsonp(b, {
                    charset: "gbk",
                    on: {
                        success: function(b) {
                            b.icon ? (d.win = new a.Tooltip(null, {
                                classname: "tooltip",
                                width: 370,
                                "arrow-size": {
                                    width: 20,
                                    height: 20

                                },
                                maxheight: 270

                            }), c = a.juicer(c, b), d.insertCSS(a.juicer(e, b)), d.bindUI()) : d.insertCSS(f)

                        }

                    }

                })

            },
                a.SpringFestival.prototype = {
                    bindUI: function() {
                        var b = this;
                        a.delegate("mouseover", b.showTips, "#content", ".J_springFestival", b),
                            a.delegate("mouseout", b.hideTips, "#content", ".J_springFestival", b)

                    },
                    showTips: function(a) {
                        this.win.show(a.currentTarget, c)

                    },
                    hideTips: function() {
                        this.win.hide()

                    },
                    insertCSS: function(a) {
                        var b = document.getElementById("in-inline-css");
                        b || (b = document.createElement("style"), b.type = "text/css", b.id = "in-inline-css", d.appendChild(b)),
                            b.styleSheet ? b.styleSheet.cssText = b.styleSheet.cssText + a: b.appendChild(document.createTextNode(a))

                    }

                },
                new a.SpringFestival

        },
        "", {
            requires: ["node-base", "event-delegate", "get-jsonp", "trip-listingToolTip", "juicer"]

        });
/*! Generated by Clam: et 2014-07-11 11:06:15 */
YUI.namespace("Y.tripAnim"),
    YUI.add("trip-anim",
        function(a) {
            a.tripAnim = function(b) {
                var c = this;
                c.config = b,
                    c.config.ua = a.UA,
                    c.init(),
                    a.augment(c, a.EventTarget)

            },
                a.tripAnim.prototype = {
                    init: function() {
                        var b = this;
                        if (b.config.ua.ie) {
                            var c = function(b) {
                                var c = this;
                                c.config = b,
                                    a.augment(c, a.EventTarget)

                            };
                            c.prototype = {
                                run: function() {
                                    var a = this;
                                    a.config.node.setStyles(a.config.to),
                                        setTimeout(function() {
                                                a.fire("end")

                                            },
                                            1)

                                }

                            },
                                b.anim = new c(b.config)

                        } else b.anim = new a.Anim(b.config)

                    },
                    run: function() {
                        var a = this;
                        a.anim.run(),
                            a.anim.on("end",
                                function() {
                                    a.fire("end")

                                })

                    },
                    stop: function() {
                        var a = this;
                        a.anim.stop && a.anim.stop()

                    }

                }

        },
        "", {
            requires: ["node-base", "anim"]

        });
/*! Generated by Clam: et 2014-07-11 11:06:15 */
YUI.namespace("Y.listWin"),
    YUI.add("list-win",
        function(a) {
            var b = '<div class="loading"><p>\u6b63\u5728\u52a0\u8f7d\u5356\u5bb6\u4fe1\u606f...</p><img src="http://img01.taobaocdn.com/tps/i1/T1T41TXkBgXXXXXXXX-155-11.gif" /></div>',
                c = -3,
                d = a.one(a.UA.webkit ? "body": "html");
            a.listWin = function(a, b) {
                var c = this;
                c.onePlane = a,
                    c.oneFlight = {
                        isShop: b.isShop,
                        id: b.id,
                        totalPrice: b.totalPrice

                    },
                    c.renderUI()

            },
                a.listWin.prototype = {
                    renderUI: function() {
                        var b = this;
                        if (b.setY(), b.oneFlight.isShop) b.onePlane.one("table").insert(a.juicer(a.pageTpl.shopSupplyBody, {
                            id: b.oneFlight.id

                        }), "after");
                        else {
                            var c = b.onePlane.get("region").height / 2 + 15;
                            b.onePlane.append(a.juicer(a.pageTpl.supplyBody, {
                                height: c,
                                totalPrice: b.oneFlight.totalPrice,
                                id: b.oneFlight.id

                            }))

                        }
                        b.listWin = b.onePlane.one(".J_Supply")

                    },
                    show: function() {
                        var b = this;
                        b.anim && b.anim.stop(),
                            b.anim = new a.tripAnim({
                                node: b.main,
                                to: {
                                    height: b.main.get("scrollHeight")

                                },
                                duration: .5,
                                overflow: "hidden"

                            }),
                            b.anim.run(),
                            b.anim.on("end",
                                function() {
                                    b.main.setStyles({
                                        height: "auto",
                                        zoom: 1

                                    })

                                })

                    },
                    loading: function() {
                        var a = this;
                        a.main && a.main.setContent(b)

                    },
                    setContent: function(a) {
                        var b = this;
                        b.main = b.onePlane.one(".J_supplyMain"),
                            b.main && (b.main.setContent(a), b.show())

                    },
                    setY: function() {
                        var b = this,
                            e = b.onePlane.getY(),
                            f = e - c,
                            g = d.get("scrollTop") - c;
                        d.get("scrollTop") > f || g > e ? window.scroll(b.onePlane.getX(), f) : a.proxyObj && a.proxyObj.setSrc("setScroll", b.onePlane.getX() + "," + f),
                            window.top != window && (window.nowNodeTop = f)

                    },
                    hide: function() {
                        var a = this;
                        return a.listWin ? void(a.listWin && a.listWin.remove()) : void 0

                    }

                }

        },
        "", {
            requires: ["node", "event-delegate", "juicer", "trip-anim"]

        });
/*! Generated by Clam: et 2014-07-11 11:06:15 */
YUI.namespace("Y.monitor"),
    YUI.add("monitor",
        function(a) {
            var b = a.Cookie,
                c = "http://log.mmstat.com/tbjipiao.33.3?logtype=2&gokey=&cache=",
                d = "http://log.mmstat.com/tbjipiao.33.4?logtype=2&gokey=&cache=";
            a.monitor = {
                init: function() {
                    var b = this;
                    a.on("beforeunload", b.addMonitor, b),
                        a.delegate("click", b.saveSortType, "#content", ".J_agentSort", b)

                },
                addMonitor: function() {
                    var b = this,
                        e = new a.RecordClick(!0);
                    e.setSrc("Price" == b.getSortType() ? c: d),
                        e = null

                },
                getSortType: function() {
                    return a.tripStorage.getItem(b.get("_l_g_") ? "pointerUser" + b.get("_nk_") : "commonUser")

                },
                saveSortType: function(c) {
                    var d = c.currentTarget;
                    if (d.hasClass("current")) var e = "des" == d.getAttribute("data-sortby") ? 1: -1;
                    else var e = "des" == d.getAttribute("data-sortby") ? -1: 1;
                    var f = d.getAttribute("data-sortType") + "::" + e;
                    b.get("_l_g_") ? a.tripStorage.setItem("pointerUser" + b.get("_nk_"), f) : a.tripStorage.setItem("commonUser", f)

                }

            },
                a.monitor.init()

        },
        "", {
            requires: ["node-base", "event-base", "cookie"]

        });
/*! Generated by Clam: et 2014-07-11 11:06:15 */
YUI.namespace("Y.spmRecord"),
    YUI.add("spm-record",
        function(a) {
            var b = (a.one("body"), "data-spm-click"),
                c = "http://gm.mmstat.com/tbtrip.";
            a.spmRecord = function(b) {
                var c = this;
                c.config = b,
                    a.delegate("mouseover", c._addRecord, "body", b.nodeQuery, c),
                    a.delegate("mouseout", c.clearRecord, "body", b.nodeQuery, c)

            },
                a.spmRecord.prototype = {
                    _addRecord: function(a) {
                        var b = this,
                            c = a.currentTarget;
                        b.clearRecord(),
                            b._oneRecord = setTimeout(function() {
                                    b.addRecord(c)

                                },
                                b.config.time || 200)

                    },
                    addRecord: function(d) {
                        if (d && window.g_SPM) {
                            if ("object" == typeof d) {
                                var e = window.g_SPM.getParam(d),
                                    f = a.one(d).getAttribute(b).split("="),
                                    g = f.length ? f[2] : e.d;
                                d = [e.a, e.b, e.c, g].join(".")

                            }
                            var h = ["logtype=2", "cache=" + Math.random(), "autosend=1"],
                                i = new Image;
                            i.src = c + d + "?" + h.join("&"),
                                i = null

                        }

                    },
                    clearRecord: function() {
                        var a = this;
                        a._oneRecord && clearTimeout(a._oneRecord)

                    }

                }

        },
        "", {
            requires: ["node-base", "event-delegate"]

        });
/*! Generated by Clam: et 2014-07-11 11:06:15 */
YUI.namespace("Y.neListing"),
    YUI.add("ne-listing",
        function(a) {
            var b = new a.CustomEvent("get-lowest-price", {
                    broadcast: 2

                }),
                c = new a.CustomEvent("show-insure", {
                    broadcast: 2

                });
            a.neListing = function(b, c) {
                var d = this;
                d.contentMain = a.one("#J_listMain"),
                d.listContent = d.contentMain.one(".inner"),
                d.searchForm = a.one("#J_jipiao_form"),
                d.endNode = a.one("#J_endDateBox"),
                d.searchBtn = d.searchForm ? d.searchForm.one(".J_btn") : null,
                d.searchInfo = c,
                d.initPageInfo(),
                d.renderSearchArea(),
                d.searchInfo.isSo360 || (d.flow = new a.flow(a.one("#J_flow")), d.flow.setFlow(d.searchInfo)),
                d.pageTitle = new a.pageTitle(a.one("#J_searchTitle")),
                d.pageTitle.render(d.searchInfo);
                var e = a.checkUrl(d.searchInfo);
                return e ? (
                    d.listContent.setContent(a.preDefined.error[e]),
                    void a.loading.hide()
                ) : (
                    a.each(a.preDefined.uri, function(c, d) {
                        a.preDefined.uri[d] = b + c

                    }),
                    d.flightList = new a.flightList(
                        a.juicer(a.preDefined.uri.direct, d.searchInfo),
                        a.preDefined.timeout.direct,
                        a.preDefined.error
                    ),
                    d.bindEvent(),
                    d.initComponent(),
                    void d.record.addOneRecord({
                        node: "body",
                        src: "http://log.mmstat.com/tbtrip.46.2?logtype=2&gokey=&cache=",
                        eventHandle: "domready"
                    })
                )

            },
                a.neListing.prototype = {
                    initPageInfo: function() {
                        var a = this;
                        a.searchInfo.tripType = parseInt(a.searchInfo.tripType),
                            a.searchInfo.scene = 99 == a.searchInfo.searchSource ? "newListing": a.searchInfo.scene,
                            a.searchInfo.enCodeDepCityName = encodeURIComponent(a.searchInfo.depCityName),
                            a.searchInfo.enCodeArrCityName = encodeURIComponent(a.searchInfo.arrCityName),
                            a.getOtherInfo()

                    },
                    initComponent: function() {
                        var b = this;
                        b.flightFilter = new a.flightFilter({},
                            function(a) {
                                b.showList(a)

                            }),
                            b.filterTitle = new a.filterTitle(a.one(".J_filter")),
                            b.record = new a.RecordClick,
                            b.spmRecord = new a.spmRecord({
                                nodeQuery: ".J_dataSpm"

                            }),
                            YTRIP.use("flight", "rule", "score", "scroll-title", "auto-refresh", "stop", "trip-listingToolTip", "near-city", "insure-tips", "feedback",
                                function(a) {
                                    b.tooltip = new a.Tooltip(null, {}),
                                        b.flightType = new a.Flight(a.preDefined.uri.flight, a.pageTpl.plane, "ne618"),
                                        b.rule = new a.Rule(a.juicer(a.preDefined.uri.rules, b.searchInfo), b.tooltip),
                                        b.stop = new a.Stop(a.preDefined.uri.stop, b.tooltip),
                                        b.score = new a.Score(a.preDefined.uri.score, b.tooltip),
                                        b.autoRefresh = new a.autorefresh,
                                        a.on("domready",
                                            function() {
                                                "99" == b.searchInfo.searchSource && a.ScrollTitle(".J_moreSupplyTitle", ".J_supplyList")

                                            }),
                                        b.searchInfo.agentId || b.searchInfo.isMain || b.searchInfo.isEtao || b.searchInfo.isSo360 || a.feedback(a.preDefined.feedBack),
                                        b.nearCity = new a.nearCity(a.one("#J_searchTitle"), a.one(".J_aside"), a.preDefined.uri.nearBy)

                                })

                    },
                    renderSearchArea: function() {
                        var b = this;
                        if (!b.searchInfo.agentId && !b.searchInfo.isSo360) {
                            var c = ["depCity", "depCityName", "arrCity", "arrCityName", "depDate", "arrDate"];
                            b.searchInfo && (a.each(b.searchForm.all(".J_type_radio"),
                                function(a) {
                                    a.get("value") == b.searchInfo.tripType && a.set("checked", !0)

                                }), 0 == b.searchInfo.tripType ? (b.endNode.ancestor("li").addClass("disabled"), b.endNode.one("input").removeClass("required"), b.endNode.one("input").removeClass("dateformat")) : (b.endNode.ancestor("li").removeClass("disabled"), b.endNode.one("input").addClass("required dateformat")), a.each(c,
                                function(a) {
                                    b.setInputVal(a)

                                })),
                                !b.searchInfo.isEtao && b.searchBtn.set("value", "\u641c\u7d22\u822a\u73ed")

                        }

                    },
                    setInputVal: function(b) {
                        var c = this,
                            d = c.searchForm.one("input[name=" + b + "]"),
                            e = c.searchInfo[b];
                        0 == c.searchInfo.tripType && "arrDate" == b || !e ? a.Modernizr.input.placeholder ? d.set("value", "") : d.set("value", d.getAttribute("placeholder")) : (d.set("value", e), d.removeClass("trip-placeholder"))

                    },
                    showList: function(b) {
                        var c = this,
                            d = [];
                        if (a.each(b,
                            function(a) {
                                d.push(a.html)

                            }), 0 == d.length) return void c.listContent.setContent(a.preDefined.error.filterNoResult);
                        if (c.listContent.setContent(d.join("")), "undefined" != typeof force_open_activityid && force_open_activityid) {
                            var e = force_open_activityid;
                            setTimeout(function() {
                                    var b = a.one(".J_otherRule[data-activityId='" + e + "']"),
                                        d = "activityForceShow",
                                        f = 864e5,
                                        g = a.tripStorage.getItem(d, f);
                                    b && !g && (c.tooltip.show(b, b.getAttribute("data-content"), 200), a.tripStorage.setItem(d, "1"))

                                },
                                1200)

                        }
                        if (c.flightList.length > 5) {
                            if (window.showRightP4P) try {
                                window.showRightP4P()

                            } catch(f) {}
                            if (window.showBottomP4P) try {
                                window.showBottomP4P()

                            } catch(f) {}

                        }

                    },
                    bindEvent: function() {
                        var b = this;
                        a.delegate("click", b.refresh, "#J_listMain", ".J_choose,.J_reserve, .J_oAgentList, .J_moreSupply, .J_agentSort, .J_Time,.J_price,.J_Score,.J_Comment,.J_bill,.J_activity", b),
                            a.delegate("mouseover", b.refresh, "#J_listMain", ".J_flightType,.J_rule,.J_filter .l-select", b),
                            a.delegate("click", b.getSupply, "#J_listMain", ".J_moreSupply", b),
                            a.delegate("click", b.getComment, "#J_listMain", ".J_Comment", b),
                            a.delegate("mouseover", b.getShare, "#J_listMain", ".J_share", b),
                            a.delegate("mouseover", b.getSpecial, "#J_listMain", ".J_special", b),
                            a.delegate("mouseover", b.getOtherRule, "#J_listMain", ".J_otherRule, .J_less", b),
                            a.delegate("mouseover", b.showDayTips, "#J_listMain", ".J_nextDay", b),
                            a.delegate("mouseout", b.hideTips, "#J_listMain", ".J_share, .J_special, .J_otherRule,.J_nextDay,.J_sepcialRule, .J_less", b),
                            b.searchInfo.agentId || (a.delegate("mouseenter", b.showMark, "#J_listMain", ".J_onePlane", b), a.delegate("mouseleave", b.hideMark, "#J_listMain", ".J_onePlane", b)),
                            a.delegate("mouseenter", b.showWW, "#J_listMain", ".J_oneSupply", b),
                            a.delegate("mouseleave", b.hideWW, "#J_listMain", ".J_oneSupply", b),
                            a.delegate("click", b.getCabinByType, "#content", ".J_filter .J_agentType input", b),
                            a.delegate("click", b.getBill, "#content", ".J_bill", b),
                            a.delegate("click", b.getListBuyPassengerNum, "#content", ".J_passengerNumList input", b),
                            a.delegate("click", b.getActivity, "#content", ".J_activity", b),
                            a.delegate("click", b.reserve, "#J_listMain", ".J_reserve", b),
                            a.delegate("click", b.sortAgent, "#content", ".J_agentSort", b),
                            a.delegate("click", b.getMoreAgent, "#content", ".J_supplyMore", b),
                            a.delegate("click", b.getLessAgent, "#content", ".J_supplyLess", b)

                    },
                    getCabinByType: function(b) {
                        var c = this;
                        c.searchInfo.cabinClass = "",
                            b.target.get("checked") && (c.searchInfo.cabinClass = b.target.get("value")),
                            clearTimeout(c.mockLoading.hideTimeOut),
                            c.searchInfo.type = "",
                            c.flightList = new a.flightList(a.juicer(a.preDefined.uri.direct, c.searchInfo), a.preDefined.timeout.direct, a.preDefined.error, !0)

                    },
                    getBill: function(b) {
                        var c = this,
                            d = b.target.get("checked");
                        c.searchInfo.type = "",
                            d ? (c.searchInfo.supplyItinerary = 1, clearTimeout(c.mockLoading.hideTimeOut)) : c.searchInfo.supplyItinerary = "",
                            c.flightList = new a.flightList(a.juicer(a.preDefined.uri.direct, c.searchInfo), a.preDefined.timeout.direct, a.preDefined.error, !0)

                    },
                    getActivity: function(b) {
                        var c = this,
                            d = b.target.get("checked");
                        c.searchInfo.type = "",
                            d ? (c.searchInfo.xuanpinOnly = "true", clearTimeout(c.mockLoading.hideTimeOut)) : c.searchInfo.xuanpinOnly = "",
                            c.flightList = new a.flightList(a.juicer(a.preDefined.uri.direct, c.searchInfo), a.preDefined.timeout.direct, a.preDefined.error, !0)

                    },
                    getListBuyPassengerNum: function(b) {
                        var c = this;
                        c.searchInfo.type = "",
                            c.searchInfo.passengerNum = 1,
                            b.target.get("checked") ? (c.searchInfo.passengerNum = b.target.get("value"), clearTimeout(c.mockLoading.hideTimeOut)) : c.searchInfo.passengerNum = 1,
                            c.flightList = new a.flightList(a.juicer(a.preDefined.uri.direct, c.searchInfo), a.preDefined.timeout.direct, a.preDefined.error, !0)

                    },
                    removeLoading: function() {
                        var a = this;
                        setTimeout(function() {
                                a.mockLoading.hide()

                            },
                            0)

                    },
                    getSupply: function(b) {
                        "A" == b.currentTarget.get("nodeName").toUpperCase() && b.preventDefault();
                        var c = this,
                            d = b.currentTarget,
                            e = c.getId(d),
                            f = d.get("value"),
                            g = "discount-current";
                        if (f) d.ancestor(".J_supplyInfo").all("li span").removeClass("current"),
                            d.ancestor("span").addClass("current");
                        else {
                            if (e == c.id) try {
                                return c.flightList.flightList[c.id].agentListBox.hide(),
                                    c.id = 0,
                                    void(c.searchInfo.agentId && a.all("." + g).removeClass(g))

                            } catch(h) {}
                            try {
                                c.oneFlight.agentListBox.hide(),
                                    c.selectPlane.removeClass("item-hover")

                            } catch(h) {}
                            if (c.searchInfo.agentId) {
                                try {
                                    var g = "discount-current";
                                    a.all("." + g).removeClass(g),
                                        d.addClass(g)

                                } catch(h) {}
                                f = 1

                            }
                            c.id = e,
                                c.searchInfo.type,
                                c.oneFlight = c.flightList.flightList[c.id],
                                c.selectPlane = d.ancestor(".J_onePlane"),
                                c.oneFlight.agentListBox = new a.listWin(c.selectPlane, c.oneFlight)

                        }
                        var i = a.one(".J_oAgentList");
                        i && i.remove(),
                            c.agentType = f,
                            c._getSupply()

                    },
                    _getSupply: function() {
                        var b = this;
                        1 == b.agentType ? b.searchInfo.type = "gaoduan": (b.agentType = 0, b.searchInfo.type = "lowprice");
                        var d = a.preDefined.loading[1 == b.agentType ? "getGaoduan": "getLowprice"];
                        b.oneFlight.agentListBox.setContent(a.juicer(a.pageTpl.supplyLoading, {
                            msg: d

                        }));
                        var e = a.juicer(a.preDefined.uri.direct, b.searchInfo);
                        b.oneFlight.getSupply(e, b.agentType, a.preDefined.timeout.moreSupply,
                            function() {
                                if (1 == b.agentType) {
                                    var d = {
                                        price: !1,
                                        score: !1,
                                        sortBy: -1,
                                        shop: !!b.searchInfo.agentId

                                    };
                                    b.oneFlight.agentListBox.setContent(a.juicer(a.pageTpl.moreSupplyTitle, d) + b.oneFlight.dealAgentItem(b.oneFlight.gaoduan))

                                } else {
                                    var e = "Service";
                                    if (b.searchInfo.agentId) {
                                        var d = {
                                            price: !0,
                                            sortBy: 1,
                                            shop: !0

                                        };
                                        e = "Price"

                                    } else {
                                        var d = {
                                                price: !1,
                                                score: !0,
                                                sortBy: -1,
                                                shop: !!b.searchInfo.agentId

                                            },
                                            f = a.monitor.getSortType();
                                        if (f) {
                                            var g = f.split("::");
                                            e = "Price" == g[0] ? "Price": "Service",
                                                d.price = "Price" == g[0] ? !0: !1,
                                                d.score = "Price" == g[0] ? !1: !0,
                                                d.sortBy = g[1] ? g[1] : d.price ? 1: -1

                                        }

                                    }
                                    b.oneFlight.agentListBox.setContent(a.juicer(a.pageTpl.moreSupplyTitle, d) + b.oneFlight.dealAgentItem(b.oneFlight["sortBy" + e](b.agentType, a.preDefined.sortNum, d.sortBy, !0))),
                                        b.oneFlight.getAgentNum(b.agentType) > a.preDefined.sortNum && b.oneFlight.agentListBox.listWin.append(a.pageTpl.supplyMore)

                                }
                                if (!a.listing.searchInfo.agentId) {
                                    var h = a.Node.create(b.oneFlight.changeAgent(b.agentType));
                                    if (h && 0 == b.agentType) {
                                        b.selectPlane.one(".wprice table").replace(h.one(".wprice table"));
                                        var i = b.selectPlane.one(".J_moreSupply");
                                        i && i.addClass("discount-current")

                                    }

                                }
                                b.changePrice(),
                                    c.fire(),
                                    a.common.LightWangWang(b.oneFlight.agentListBox.listWin)

                            })

                    },
                    sortAgent: function(b) {
                        var c = this,
                            d = b.currentTarget,
                            e = d.ancestor("table"),
                            f = e.next(".J_supplyList"),
                            g = c.flightList.flightList[c.id],
                            h = d.getAttribute("data-sortBy"),
                            i = "asc" == h,
                            j = d.getAttribute("data-sortType"),
                            k = [],
                            l = 0,
                            m = d.ancestor(".J_Supply").one(".J_supplyMore");
                        m && 0 == c.agentType && (l = a.preDefined.sortNum),
                            d.hasClass("current") ? (i ? (d.one("em").removeClass("sort-up"), d.setAttribute("data-sortBy", "des"), d.setAttribute("title", d.getAttribute("data-asc"))) : (d.one("em").addClass("sort-up"), d.setAttribute("data-sortBy", "asc"), d.setAttribute("title", d.getAttribute("data-des"))), k = g["sortBy" + j](c.agentType, l, i ? -1: 1)) : (a.each(e.all(".J_agentSort"),
                                function(a) {
                                    if (a != d) {
                                        var b = "asc" == a.getAttribute("data-sortBy");
                                        a.removeClass("current"),
                                            a.setAttribute("title", a.getAttribute("data-" + (b ? "asc": "des")))

                                    }

                                }), d.addClass("current"), d.setAttribute("title", d.getAttribute("data-" + (i ? "des": "asc"))), d.setAttribute("data-sortBy", h), k = g["sortBy" + j](c.agentType, l, i ? 1: -1)),
                            f.replace(g.dealAgentItem(k)),
                            a.common.LightWangWang(g.agentListBox.listWin)

                    },
                    getMoreAgent: function(b) {
                        b.halt();
                        var d = this,
                            e = b.currentTarget,
                            f = e.ancestor(".J_Supply"),
                            g = f.one(".J_supplyList"),
                            h = a.preDefined.sortNum;
                        agentList = d.oneFlight.getAgentByIndex(d.agentType, h),
                            g.appendChild(d.oneFlight.dealAgentItem(agentList)),
                            e.replace(a.pageTpl.supplyLess),
                            c.fire(),
                            a.common.LightWangWang(d.oneFlight.agentListBox.listWin)

                    },
                    getLessAgent: function(b) {
                        b.halt();
                        var d = this,
                            e = b.currentTarget,
                            f = e.ancestor(".J_Supply").all(".J_oneSupply"),
                            g = a.preDefined.sortNum,
                            h = d.oneFlight.getAgentByIndex(d.agentType, 0);
                        a.each(f,
                            function(a) {
                                var b = a.getAttribute("data-id"),
                                    c = h[b];
                                c.stickt && g++

                            });
                        var i = 0;
                        a.each(f,
                            function(a) {
                                {
                                    var b = a.getAttribute("data-id");
                                    h[b]

                                }
                                return i >= g ? void a.remove() : void i++

                            }),
                            d.oneFlight.agentListBox.setY(),
                            e.replace(a.pageTpl.supplyMore),
                            c.fire()

                    },
                    getComment: function(b) {
                        b.preventDefault();
                        var c = this,
                            d = b.currentTarget,
                            e = c.flightList.flightList[c.getId(d)],
                            f = d.ancestor(".J_oneSupply");
                        if (c.score.hide(), f.one(".J_comment")) c.nowComment && c.nowComment.hide();
                        else {
                            var g = d.ancestor("div").getX() - d.ancestor("tr").getX() + d.ancestor("div").get("offsetWidth") / 2 - 15;
                            f.append(a.juicer(a.pageTpl.comment, {
                                left: g

                            })),
                                c.nowComment && c.nowComment.hide(),
                                c.nowComment = new a.comment(e.getAgentById(c.agentType, f.getAttribute("data-id")).comment, f.one(".J_commentList")),
                                d.one("em").addClass("up")

                        }

                    },
                    reserve: function(b) {
                        b.preventDefault();
                        var c = this,
                            d = b.currentTarget;
                        if (!c.isReserveing) {
                            if (c.isReserveing = !0, d.hasClass("reserve-disable")) return c.isReserveing = !1,
                                void alert("\u4e3a\u4fdd\u969c\u53ef\u9760\u51fa\u884c\uff0c\u8bf7\u9009\u62e92\u5c0f\u65f6\u540e\u8d77\u98de\u7684\u822a\u73ed\u3002");
                            var e = d.getAttribute("data-goldid");
                            if (e) {
                                var f = new a.RecordClick(!0);
                                f.setSrc("http://gm.mmstat.com/" + e + "?logtype=2&gokey=&cache="),
                                    f = null

                            }
                            var g = c.getId(d),
                                h = d.ancestor(".J_oneSupply"),
                                i = c.agentType,
                                j = c.flightList.flightList[g],
                                k = h ? j.getAgentById(i, h.getAttribute("data-id")) : j.cabin;
                            return c.getReserveUrl(j, k, d.getAttribute("data-insure")),
                                "CZ" == j.airlineCode && k.directGov && (c.czRecord = new a.RecordClick(!0), c.czRecord.setSrc("http://gm.mmstat.com/tbtrip.1.6.1.1.42?logtype=2&gokey=&cache=")),
                                c.searchInfo.agentId || c.searchInfo.isMain || window.outSide || c.czRecord ? (c.isReserveing = !1, c.czRecord = null, c.searchInfo.isSo360 && QHLY.userBehavior(QHLY.ACTION.ORDER_TICKETS, {}), void window.open(window.orderUrl, "_blank")) : c.searchInfo.isEtao ? (c.isReserveing = !1, void a.etaoLogin(window.orderUrl)) : void c.isLogin()

                        }

                    },
                    isLogin: function() {
                        var b = this,
                            c = function(c) {
                                return 1 == c.login ? (window.open(window.orderUrl, "_top"), void(b.isReserveing = !1)) : (b.loginWin = b.loginWin || new a.loginWin(b.isBpm), b.loginWin.show(window.orderUrl.replace("open_order", "quick_open_order")), void(b.isReserveing = !1))

                            },
                            d = function() {
                                b.isReserveing = !1,
                                    window.open(window.orderUrl, "_self")

                            };
                        a.getJSONP(a.preDefined.uri.isLogin, c, d)

                    },
                    getReserveUrl: function(b, c, d) {
                        var e = this,
                            f = {};
                        f.depCity = e.searchInfo.depCity,
                            f.arrCity = e.searchInfo.arrCity,
                            f.depDate = e.searchInfo.depDate,
                            f.searchBy = e.searchInfo.searchBy,
                            f.scene = e.searchInfo.scene,
                            f.searchSource = e.searchInfo.searchSource,
                            f.isInsPromotion = d ? 1: "",
                            f.isBuss = e.searchInfo.isBpm ? "true": "false",
                            f.flightNo = b.flightNo,
                            f.price = c.price,
                            f.agentId = c.agentId,
                            f.cabin = c.cabin,
                            f.cheapToken = c.actToken || "",
                            f.activityId = c.activityId,
                            f.invoiceType = c.itineraryPriceType,
                            f.stockType = c.stockType,
                            f.segs = c;
                        var g = a.preDefined.uri.fastBuy;
                        e.searchInfo.isEtao && (g = a.preDefined.uri.fastBuyEtao),
                            window.orderUrl = a.juicer(g.replace("s.", ""), f)

                    },
                    dealPageInfo: function(b, d, e) {
                        var f = this;
                        return f.mockLoading ? (a.loading.hide(), f.filterTitle.render({
                            isShop: a.listing.searchInfo.agentId,
                            isAirPort: b,
                            airPortName: d,
                            isPassengerNum: !a.listing.searchInfo.tripType,
                            xuanpinOnly: a.listing.searchInfo.xuanpinOnly,
                            activityName: a.listing.searchInfo.activityName

                        }), f.flightFilter.changeNotify(f.flightList.flightList, e), a.one(".J_activity") && f.flightFilter.doFilter(a.one(".J_activity")), f.week && f.week.reloadWeek(f.searchInfo), setTimeout(function() {
                                document.title = a.juicer(a.preDefined.title, f.searchInfo)

                            },
                            0), f.showFlash(), f.changePrice(), void f.nearCity.changeInfo(f.searchInfo, window.lowestPrice || a.preDefined.nearCityPrice)) : void YTRIP.use("mock-loading", "comment", "week-trip", "swfobject", "login-win", "place-info",
                            function(a) {
                                a.loading.hide(),
                                    f.mockLoading = new a.mockLoading(f.contentMain, !0),
                                    f.week = new a.weekTrip(a.preDefined.uri.weekTrip, f.initWeekUrl(), a.preDefined.timeout.weekTrip);
                                var g = 9999999;
                                for (var h in f.flightList.flightList) {
                                    var i = f.flightList.flightList[h].cabin.allFinalPrice;
                                    g > i && (g = i)

                                }
                                if (f.searchInfo.lowestPrice = g, f.week.reloadWeek(f.searchInfo), f.filterTitle.render({
                                    isShop: a.listing.searchInfo.agentId,
                                    isAirPort: b,
                                    airPortName: d,
                                    isPassengerNum: !a.listing.searchInfo.tripType,
                                    xuanpinOnly: a.listing.searchInfo.xuanpinOnly,
                                    activityName: a.listing.searchInfo.activityName

                                }), f.flightFilter.changeNotify(f.flightList.flightList, e), a.one(".J_activity") && f.flightFilter.doFilter(a.one(".J_activity")), f.searchInfo.itemId) {
                                    var j = a.one("#J_listMain [data-id=" + f.searchInfo.itemId + "] .J_choose");
                                    j && a.Event.simulate(j._node, "click"),
                                        window.scroll(0, j.getY())

                                } else {
                                    var k = f._getSearch("flightNo");
                                    if (k) {
                                        var l = a.one("#J_listMain [data-flightno=" + k + "] .J_moreSupply");
                                        l && (a.Event.simulate(l._node, "click"), window.scroll(0, l.getY()))

                                    }

                                }
                                setTimeout(function() {
                                        document.title = a.juicer(a.preDefined.title, f.searchInfo)

                                    },
                                    0),
                                    f.showFlash(),
                                    f.changePrice(),
                                    f.nearCity.changeInfo(f.searchInfo, window.lowestPrice || a.preDefined.nearCityPrice),
                                    c.fire()

                            })

                    },
                    dealFail: function(b) {
                        var d = this;
                        d.week || YTRIP.use("mock-loading", "comment", "week-trip", "swfobject", "login-win", "place-info",
                            function(a) {
                                a.loading.hide(),
                                    d.mockLoading = new a.mockLoading(d.contentMain, !0),
                                    d.week = new a.weekTrip(a.preDefined.uri.weekTrip, d.initWeekUrl(), a.preDefined.timeout.weekTrip),
                                    d.week.reloadWeek(d.searchInfo),
                                    b && b.indexOf("\u66f4\u6362") >= 0 && d.showFlash()

                            }),
                            setTimeout(function() {
                                    document.title = a.juicer(a.preDefined.title, d.searchInfo)

                                },
                                0),
                            d.flightFilter.changeNotify({}),
                            d.nearCity && !a.one(".J_nearList") && d.nearCity.changeInfo(d.searchInfo, window.lowestPrice || a.preDefined.nearCityPrice),
                            c.fire()

                    },
                    showFlash: function() {
                        var b = this;
                        if (!b.searchInfo.agentId && !b.searchInfo.isEtao) {
                            var c = a.one("#J_chart");
                            c ? c.get("parentNode").replace(a.juicer(a.pageTpl.flashHtml, b.searchInfo)) : b.contentMain.append(a.juicer(a.pageTpl.flashHtml, b.searchInfo)),
                                b.searchInfo.isMain && (a.preDefined.flash.width = a.DOM.docWidth() - 40, a.preDefined.flash.height = a.DOM.docWidth() / 2.15),
                                swfobject.embedSWF(a.juicer(a.preDefined.flash.url, b.searchInfo), a.preDefined.flash.content, a.preDefined.flash.width, a.preDefined.flash.height, a.preDefined.flash.flashV, a.preDefined.flash.flashUrl, {
                                        blank: 1,
                                        low: b.searchInfo.isBack ? 1: 0,
                                        js_fun: "flash_fun"

                                    },
                                    a.preDefined.flash.flashParams),
                                c && c.get("parentNode").removeClass("hidden"),
                                b.record.setSrc("http://gm.mmstat.com/tbtrip.1.6.1.1.5?logtype=2&gokey=&cache=")

                        }

                    },
                    hideFlash: function() {
                        var b = a.one("#J_chart");
                        b && b.get("parentNode").addClass("hidden")

                    },
                    getShare: function(b) {
                        var c = this,
                            d = b.currentTarget,
                            e = c.flightList.flightList[c.getId(d)];
                        c.tooltip.show(d, a.juicer(a.pageTpl.share, e), 200)

                    },
                    getSpecial: function(b) {
                        var c = this,
                            d = b.currentTarget,
                            e = d.getAttribute("data-content");
                        d.getAttribute("data-apply") && (e = a.preDefined.apply),
                            e && c.tooltip.show(d, e, 250)

                    },
                    getOtherRule: function(a) {
                        var b = this,
                            c = a.currentTarget,
                            d = c.getAttribute("data-content");
                        d && b.tooltip.show(c, d, 200)

                    },
                    showDayTips: function(b) {
                        var c = this,
                            d = b.currentTarget,
                            e = c.flightList.flightList[c.getId(d)];
                        c.tooltip.show(d, a.juicer(a.pageTpl.timeTips, e), 130)

                    },
                    hideTips: function() {
                        var a = this;
                        a.tooltip.hide()

                    },
                    changePrice: function() {
                        var c = this,
                            d = a.all(".J_cPrice").get("innerHTML");
                        if (d) {
                            var e = d.sort(function(a, b) {
                                return a - b

                            })[0];
                            if (e) {
                                var f = a.one(".J_slideContent .current span span"),
                                    g = a.one(".J_monthPrice .current span");
                                f && f.replace('<span class="price lowest">&yen;<em>' + e + "</em>&nbsp;</span>"),
                                    g && g.replace('<span class="price">&yen;' + e + "</span>"),
                                    window.price = 0

                            }
                            window.lowestPrice = e,
                                c.searchInfo && !c.searchInfo.tripType && b.fire({
                                    lowestPrice: e,
                                    tripObj: c

                                })

                        }

                    },
                    changeInsureTips: function() {
                        c.fire({
                            update: !0

                        })

                    },
                    showMark: function(a) {
                        a.currentTarget.addClass("item-hover")

                    },
                    hideMark: function(a) {
                        var b = a.currentTarget,
                            c = b.one(".J_Supply");
                        c && "none" != c.getStyle("display") || b.removeClass("item-hover")

                    },
                    showWW: function(a) {
                        a.currentTarget.addClass("supply-item-hover")

                    },
                    hideWW: function(a) {
                        a.currentTarget.removeClass("supply-item-hover")

                    },
                    refresh: function(a) {
                        var b = this;
                        b.autoRefresh && (b.autoRefresh.autoRefreshFlag ? (a.halt(!0), b.autoRefresh.show()) : b.autoRefresh.clearTime())

                    },
                    getId: function(a) {
                        return a.ancestor(".J_onePlane").getAttribute("data-id")

                    },
                    getOtherInfo: function() {
                        var a,
                            b,
                            c,
                            d = this;
                        window.global_trip_mk ? (b = window.global_trip_mk, a = b.config_param.common, a.depCity = d.searchInfo.depCity, a.arrCity = d.searchInfo.arrCity, a.tripType = d.searchInfo.tripType, a.depDate = d.searchInfo.depDate, a.arrDate = d.searchInfo.arrDate, b.reload(b.config_param)) : window.MK_BASE_CONFIG && (c = window.MK_BASE_CONFIG, c.common.depCity = d.searchInfo.depCity, c.common.arrCity = d.searchInfo.arrCity, c.common.tripType = d.searchInfo.tripType, c.common.depDate = d.searchInfo.depDate, c.common.arrDate = "yyyy-mm-dd" == d.searchInfo.arrDate ? "": d.searchInfo.arrDate)

                    },
                    skipToOrder: function() {
                        window.open(window.orderUrl, "_self")

                    },
                    initWeekUrl: function() {
                        var b = this,
                            c = a.preDefined.linkUrl;
                        if (b.searchInfo.agentId) return b._changeLink(c.shopWeekRequest, ["_fmh.fl._0.s", "_fmh.fl._0.st", "_fmh.fl._0.e", "_fmh.fl._0.en", "domain", "shop_id", "user_id", "shopUrl", "userId", "searchId", "serverName"]);
                        if (b.searchInfo.isMain) {
                            {
                                window.location.href

                            }
                            return b._changeLink(c.searchOneWayWeekRequest, ["_fmh.fl._0.e", "_fmh.fl._0.s"])

                        }
                        return b.searchInfo.isEtao ? b._changeLink(c.etaoWeekRequest, ["depCityName", "arrCityName", "tbhost"]) : b.searchInfo.isSo360 ? b._changeLink(c.so360WeekRequest, ["tc", "qc", "t", "q", "depDate"]) : b._changeLink(c.weekRequest, ["depCity", "depCityName", "arrCity", "arrCityName"])

                    },
                    _changeLink: function(b, c) {
                        var d = this;
                        return a.each(c,
                            function(a) {
                                b = b.replace(new RegExp("%" + a + "%", "gi"), d._getSearch(a))

                            }),
                            b

                    },
                    _getSearch: function(a) {
                        var b = window.location.search;
                        return (b.match(new RegExp("(\\?|&)" + a + "=(.*?)(?=&|$)")) || ["", "", ""])[2]

                    }

                },
                window.flash_fun = function(b, c, d) {
                    var e = a.listing.searchInfo,
                        f = e.depCity,
                        g = e.arrCity,
                        h = !1;
                    e.depCityName == c && (h = !0, f = e.arrCity, g = e.depCity);
                    var e = {
                        depCityName: encodeURIComponent(b),
                        arrCityName: encodeURIComponent(c),
                        enCodeDepCityName: encodeURIComponent(b),
                        enCodeArrCityName: encodeURIComponent(c),
                        depCity: f,
                        arrCity: g,
                        depDate: d,
                        inTime: "",
                        tripType: 0,
                        isBack: !1,
                        isMain: e.isMain,
                        searchBy: e.searchBy,
                        scene: e.scene,
                        searchSource: e.searchSource

                    };
                    if (e.isMain) {
                        if (h) var i = a.listing._changeLink(a.preDefined.linkUrl.searchOneWayWeekRequestBack, ["_fmh.fl._0.e", "_fmh.fl._0.s"]);
                        else var i = a.listing._changeLink(a.preDefined.linkUrl.searchOneWayWeekRequest, ["_fmh.fl._0.e", "_fmh.fl._0.s"]);
                        return void window.open(a.juicer(i, {
                            searchInfo: e,
                            depDate: d

                        }), "_top")

                    }
                    window.open(a.juicer(a.preDefined.linkUrl.form, e), "_self")

                },
                window.skipToOrder = a.neListing.prototype.skipToOrder,
                window.changePrice = a.neListing.prototype.changePrice,
                window.changeInsureTips = a.neListing.prototype.changeInsureTips

        },
        "", {
            requires: ["node-base", "event", "flight-filter", "filter-title", "check-url", "trip-history", "template", "listing-css", "predefined", "page-title", "loading", "flight-list", "flow", "record-click", "monitor", "spm-record"]

        });